System.register("chunks:///_virtual/bg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data.ts"],(function(t){var r,e,o,i,a,n,c,l,u;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,n=t._decorator,c=t.Material,l=t.Component},function(t){u=t.data}],execute:function(){var s,p,f,g,d;a._RF.push({},"956d48SkY5DpYRdbgWocbEE","bg",void 0);var y=n.ccclass,b=n.property;t("Bg",(s=y("bg"),p=b(c),s((d=r((g=function(t){function r(){for(var r,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return r=t.call.apply(t,[this].concat(a))||this,o(r,"material",d,i(r)),r}e(r,t);var a=r.prototype;return a.onLoad=function(){var t=u.getBgColorGroup();this.material.setProperty("color_1",t[0]),this.material.setProperty("color_2",t[1])},a.update=function(t){},r}(l)).prototype,"material",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./helper.ts","./tile.ts","./data.ts"],(function(t){var e,i,r,o,h,n,s,a,l,p,d,u,g,f,c,v,b,_,y,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.createForOfIteratorHelperLoose,o=t.createClass},function(t){h=t.cclegacy,n=t._decorator,s=t.Enum,a=t.CCInteger,l=t.CCBoolean,p=t.log,d=t.UITransform,u=t.v3,g=t.view,f=t.Component},function(t){c=t.TileShape,v=t.formatValWithBinary,b=t.TileType,_=t.getReverseDir},function(t){y=t.Tile},function(t){S=t.data}],execute:function(){var A,w,T,W,O,x,D;h._RF.push({},"fa977xIOnhBophChR1in19I","board",void 0);var L=n.ccclass,H=n.property;n.executeInEditMode,t("Board",(A=L("board"),w=H({type:s(c),tooltip:"棋盘tile形状"}),T=H({type:a,step:1}),W=H({type:a,step:1}),O=H({type:l}),A((e((D=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).tileArr=[],e._tileShape=c.four,e._boardWidth=6,e._boardHeight=7,e.littedLines={},e._bShowDebug=!1,e}i(e,t);var h=e.prototype;return h.onLoad=function(){},h.onChangleTileAngle=function(t){for(var e in this.littedLines){for(var i,o=parseInt(e),h=this.tileArr[o],n=this.littedLines[o],s=this._getLineWithStartTile(h),a=r(s);!(i=a()).done;){var l=i.value;n.indexOf(l)<0&&l.setIsOn(!0)}for(var d,u=r(n);!(d=u()).done;){var g=d.value;s.indexOf(g)<0&&g.setIsOn(!1)}this.littedLines[o]=s}this.checkIsAllJoined()&&(p("完成了"),this.node.emit("onFinishLevel"))},h._initShape=function(){var t,e;this.tileShape==c.four?(t=256,e=256):this.tileShape==c.six&&(t=220,e=2/1.73205*220);for(var i=0;i<this._boardWidth;i++)for(var o=0;o<this._boardHeight;o++){var h=i*this._boardHeight+o,n=this.tileArr[h];if(null==n){var s=S.getTileNode();s.parent=this.node,this.tileArr[h]=s.getComponent(y),n=this.tileArr[h]}n.setBoard(this),n.__tileIdx=h;var a=n.node.getComponent(d);if(a.height=t,a.width=e,this._tileShape==c.six){var l=(3*i+2)/3.4641*t,p=(o+.5)*t+i%2*.5*t;n.node.position=u(l,p,n.node.position.z)}else{var f=(i+.5)*t,v=(o+.5)*t;n.node.position=u(f,v,n.node.position.z)}}for(;this.tileArr.length>this._boardWidth*this._boardHeight;)S.recyleTile(this.tileArr.pop());var b=this.node.getComponent(d);this._tileShape==c.six?(b.width=(3*this._boardWidth+1)/3.4641*t,b.height=(this._boardHeight+.5)*t):(b.width=this._boardWidth*t,b.height=this._boardHeight*t);for(var _,A=r(this.tileArr);!(_=A()).done;){var w=_.value;w.node.position=u(w.node.position.x-b.width*b.anchorX,w.node.position.y-b.height*b.anchorY,w.node.position.z)}var T=g.getVisibleSize();this.node.position=u(b.width*this.scale*(b.anchorX-.5),this.node.position.y,this.node.position.z);var W=.8*T.width/b.width,O=.7*T.height/b.height,x=this._tileShape==c.four?.6:.7;this.scale=Math.min(W,O,x),this.bShowDebug&&this.showDebug(!0)},h.showDebug=function(t,e){void 0===e&&(e=null);for(var i,o=r(this.tileArr);!(i=o()).done;){i.value.showDebug(t,e)}this._bShowDebug=t},h.initLevel=function(){},h.getCoord=function(t){var e=this.tileArr.indexOf(t),i=Math.floor(e/this._boardHeight);return{i:i,j:e-i*this._boardHeight}},h._getSideNearTiles=function(t){var e=this,i=this.getCoord(t),r=i.i,o=i.j,h=v(t.getValueWithAngle(),t.tileShape),n=[],s=function(t,i,r){if(!(t<0||t>=e._boardWidth||i<0||o>=e._boardHeight)&&"1"==h[r]){var s=_(r,e.tileShape),a=t*e._boardHeight+i,l=e.tileArr[a];if(null!=l)"1"==v(l.getValueWithAngle(),l.tileShape)[s]&&n.push(l)}};return this.tileShape==c.four?(s(r,o+1,0),s(r+1,o,1),s(r,o-1,2),s(r-1,o,3)):r%2==1?(s(r,o+1,0),s(r+1,o+1,1),s(r+1,o,2),s(r,o-1,3),s(r-1,o,4),s(r-1,o+1,5)):(s(r,o+1,0),s(r+1,o,1),s(r+1,o-1,2),s(r,o-1,3),s(r-1,o-1,4),s(r-1,o,5)),n},h._getLineWithStartTile=function(t,e){var i,o=this;return void 0===e&&(e=null),(e=e||[]).push(t),(i=function(t){t.__tileIdx;var h=o._getSideNearTiles(t);if(0!=h.length){for(var n,s=[],a=r(h);!(n=a()).done;){var l=n.value;e.indexOf(l)<0&&(s.push(l),e.push(l))}if(0!=s.length)for(var p=0,d=s;p<d.length;p++){var u=d[p];i(u)}}})(t),e},h._debugShowIdxsOfArr=function(t){if(void 0===t&&(t=null),null!=t||null!=(t=this.littedLines[0])){for(var e=[],i=0;i<t.length;i++)e.push(this._getIdx(t[i]));return JSON.stringify(e)}},h._getIdx=function(t){for(var e=0;e<this.tileArr.length;e++)if(this.tileArr[e]==t)return e},h.checkIsJoined=function(t,e,i){if(void 0===i&&(i=[]),null==e||null==t)return!1;if(0==e.value||0==t.value)return!1;if(i.indexOf(t)>=0)return!1;var r=v(t.getValueWithAngle(),t.tileShape),o=this._getSideNearTiles(t),h=o.indexOf(e);if(-1==h){i.push(t);for(var n=0;n<o.length;n++)if(0!=o[n].value){var s=n>=2?n-2:n+2;this.tileShape==c.six&&(s=n>=3?n-3:n+3);var a=v(o[n].getValueWithAngle(),o[n].tileShape);if("1"==r[n]&&"1"==a[s])if(this.checkIsJoined(o[n],e,i))return!0}return!1}var l=v(e.getValueWithAngle(),e.tileShape),p=h,d=p>=2?p-2:p+2;return this.tileShape==c.six&&(d=p>=3?p-3:p+3),"1"==r[p]&&"1"==l[d]},h.checkIsAllJoined=function(){for(var t=0;t<this.tileArr.length;t++){var e=this.tileArr[t];if(0!=e.value){var i=!1;for(var r in this.littedLines){var o=parseInt(r);this.tileArr[o];this.littedLines[o].indexOf(e)>=0&&(i=!0)}if(!i)return!1}}return!0},h.getTileMapConfig=function(){var t={};t.width=this._boardWidth,t.height=this._boardHeight,t.shape=this.tileShape,t.tiles=[];for(var e=0;e<this.tileArr.length;e++){var i=this.tileArr[e];t.tiles[e]={tileType:i.tileType,value:i.value,angle:i.angle,specialType:i.specialType}}return t},h.initWithTileMapConfig=function(t){var e;if(null!=(e="string"==typeof t?JSON.parse(t):t)){this._boardWidth=e.width,this._boardHeight=e.height,this._tileShape=e.shape,this.clear(),this._initShape();for(var i=0;i<this.tileArr.length;i++){var o=e.tiles[i];this.tileArr[i].init({board:this,tileType:o.tileType,specialType:o.specialType,value:o.value,angle:o.angle})}for(var h=0;h<this.tileArr.length;h++){var n=this.tileArr[h];if(n.tileType==b.power)this.littedLines[h]=this._getLineWithStartTile(n);else{if(n.tileType!=b.wifi)continue;n.isOn()?this.littedLines[h]=this._getLineWithStartTile(n):this.littedLines[h]=[]}for(var s,a=r(this.littedLines[h]);!(s=a()).done;){s.value.setIsOn(!0)}}}},h.doDisrupt=function(){for(var t=0;t<this.tileArr.length;t++){this.tileArr[t].doDisrupt()}},h.clear=function(){for(var t=0;t<this.tileArr.length;t++){this.tileArr[t].clear()}},o(e,[{key:"scale",get:function(){return this.node.scale.x},set:function(t){this.node.scale=u(t,t,t)}},{key:"tileShape",get:function(){return this._tileShape},set:function(t){this._tileShape=t,this._tileShape==c.six&&(this._boardWidth=6,this._boardHeight=7),this._initShape()}},{key:"borderWidth",get:function(){return this._boardWidth},set:function(t){this._boardWidth=t,this._initShape()}},{key:"boardHeight",get:function(){return this._boardHeight},set:function(t){this._boardHeight=t,this._initShape()}},{key:"bShowDebug",get:function(){return this._bShowDebug},set:function(t){this._bShowDebug=t,this.showDebug(t)}}]),e}(f)).prototype,"tileShape",[w],Object.getOwnPropertyDescriptor(D.prototype,"tileShape"),D.prototype),e(D.prototype,"borderWidth",[T],Object.getOwnPropertyDescriptor(D.prototype,"borderWidth"),D.prototype),e(D.prototype,"boardHeight",[W],Object.getOwnPropertyDescriptor(D.prototype,"boardHeight"),D.prototype),e(D.prototype,"bShowDebug",[O],Object.getOwnPropertyDescriptor(D.prototype,"bShowDebug"),D.prototype),x=D))||x));h._RF.pop()}}}));

System.register("chunks:///_virtual/data.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tile.ts"],(function(e){var r,t,n,a,i,u,l,o,s;return{setters:[function(e){r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){n=e.cclegacy,a=e.NodePool,i=e.color,u=e.resources,l=e.JsonAsset,o=e.Node},function(e){s=e.Tile}],execute:function(){var f;e("data",void 0),n._RF.push({},"63088AeDF5IE4+ODILHfp37","data",void 0),function(e){var n=0;e.getNextLevel=function(){return n},e.jumpLevel=function(e){return e&&(n=e),n<0?n=0:e>=f.length-1&&(n=f.length-1),n},e.nextLevel=function(){return++n},e.needDebug=function(){return n<=1},e.getCurLevelData=function(){return f[n]||null};var f=[];e.loadLevelCfgs=function(){u.load("level_cfg",l,(function(e,r){e?console.error(e):f=r.json}))};var x=JSON.parse('{   \n        "0110": [{"x": 61,"y": -61,"z": 0},null,{"x": 61,"y": -61,"z": 0},{"x": 61,"y": -61,"z": 0},{"x": 61,"y": -61,"z": 0}],\n        "1000": [null,{"x": 0,"y": 35,"z": 0},{"x": 61,"y": -61,"z": 0}],\n        "1010": [{"x": 0,"y": 0,"z": 0},{"x": 0,"y": 0,"z": 0}],\n        "1100": [null,{"x": 35,"y": 35,"z": 0},{"x": 35,"y": 35,"z": 0}],\n        "1110": [{"x": 61,"y": 0,"z": 0},{"x": 34,"y": 0,"z": 0},{"x": 61,"y": 0,"z": 0},{"x": 61,"y": 0,"z": 0},{"x": 61,"y": 0,"z": 0}],\n        "1111": [{"x": 0,"y": 0,"z": 0},{"x": 0,"y": 0,"z": 0},{"x": 0,"y": 0,"z": 0},{"x": 0,"y": 0,"z": 0},{"x": 0,"y": 0,"z": 0}],\n        "100000": [null,{"x": 0,"y": 31,"z": 0}],\n        "100100": [{"x": 0,"y": 0,"z": 0},{"x": 0,"y": 0,"z": 0}],\n        "101000": [{"x": 47,"y": 26,"z": 0},{"x": 24,"y": 27,"z": 0}],\n        "101010": [{"x": 0,"y": 27,"z": 0},{"x": 0,"y": 27,"z": 0}],\n        "101100": [{"x": 46,"y": 0,"z": 0},{"x": 23,"y": 0,"z": 0}],\n        "110000": [{"x": 46,"y": 77,"z": 0},{"x": 23,"y": 30,"z": 0}],\n        "110100": [{"x": 46,"y": 0,"z": 0},{"x": 23,"y": 0,"z": 0}],\n        "110101": [{"x": 0,"y": 0,"z": 0},{"x": 0,"y": 0,"z": 0}],\n        "110110": [{"x": 0,"y": 0,"z": 0},{"x": 0,"y": 0,"z": 0}],\n        "111000": [{"x": 47,"y": 26,"z": 0},{"x": 24,"y": 26,"z": 0}],\n        "111100": [{"x": 47,"y": 0,"z": 0},{"x": 24,"y": 0,"z": 0}],\n        "111110": [{"x": 0,"y": 0,"z": 0},{"x": 0,"y": 0,"z": 0}],\n        "111111": [{"x": 0,"y": 0,"z": 0},{"x": 0,"y": 0,"z": 0}]\n    }');function c(){return y.apply(this,arguments)}function y(){return(y=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=2;break}return e.abrupt("return",x);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=r(t().mark((function e(r,n){var a,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:if(a=e.sent,(i=a[r])instanceof Array){e.next=6;break}return e.abrupt("return",null);case 6:if(!i[n]){e.next=10;break}return e.abrupt("return",i[n]);case 10:if(1!=n||null==i[0]){e.next=14;break}return e.abrupt("return",i[0]);case 14:if(0!=n||null==i[1]){e.next=18;break}return e.abrupt("return",i[1]);case 18:if(!(--n>=0)){e.next=23;break}if(!i[n]){e.next=21;break}return e.abrupt("return",i[n]);case 21:e.next=18;break;case 23:return e.abrupt("return",null);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.loadImgPoses=c,e.getImgPosOfTile=function(e,r){return h.apply(this,arguments)};var z=new a;e.recyleTile=function(e){z.put(e.node)},e.getTileNode=function(){if(0==z.size()){var e=new o;return e.addComponent(s),e}return z.get()};var v=[[i(1,10,103),i(150,27,129)],[i(118,4,50),i(227,139,102)],[i(14,3,123),i(0,174,149)],[i(0,53,46),i(60,164,83)],[i(1,86,106),i(212,179,51)],[i(70,23,47),i(234,111,107)]];e.getBgColorGroup=function(e){return void 0===e&&(e=null),(null==e||e<0||e>=v.length)&&(e=Math.floor(Math.random()*v.length)),v[e]},e._term=function(e){for(var r=0,t=0;;t+=e.height){for(var n=!0,a=0;a<e.height;a++){var i=e.tiles.length-1-t-a;if(e.tiles[i].value>0){n=!1;break}}if(!n)break;r++}e.tiles.splice(e.tiles.length-r*e.height,r*e.height),e.width-=r,r=0;for(var u=0;;u+=e.height){for(var l=!0,o=0;o<e.height;o++){var s=u+o;if(e.tiles[s].value>0){l=!1;break}}if(!l)break;r++}e.tiles.splice(0,r*e.height),e.width-=r,r=0;for(var f=0;f<e.height;f+=1){for(var x=!0,c=0;c<e.width;c++){var y=f+c*e.height;if(e.tiles[y].value>0){x=!1;break}}if(!x)break;r++}for(var h=e.width-1;h>=0;h--){var z=h*e.height;e.tiles.splice(z,r)}e.height-=r,r=0;for(var v=e.height-1;v>=0;v-=1){for(var g=!0,p=0;p<e.width;p++){var d=v+p*e.height;if(e.tiles[d].value>0){g=!1;break}}if(!g)break;r++}for(var b=e.width-1;b>=0;b--){var k=(b+1)*e.height-r;e.tiles.splice(k,r)}e.height-=r}}(f||(f=e("data",{}))),f.loadLevelCfgs(),n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Canvas,g=t.UITransform,h=t.instantiate,p=t.Label,c=t.Color,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[c.WHITE,c.BLACK,c.RED,c.GREEN,c.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(a)){var t=this.node.parent.getComponent(g),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=h(s);l.parent=this.node,l.name="Buttons";var r=h(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=h(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(p);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=c.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?h(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(p);this.labelComponentList[this.labelComponentList.length]=S;var x=h(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(p)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=h(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(p)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=h(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?h(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bg.ts","./board.ts","./data.ts","./helper.ts"],(function(e){var l,i,a,t,p,n,s,y,o,u,T,r,c,g,v,h,d,f;return{setters:[function(e){l=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){p=e.cclegacy,n=e._decorator,s=e.SpriteAtlas,y=e.input,o=e.Input,u=e.log,T=e.KeyCode,r=e.Component},function(e){c=e.Bg},function(e){g=e.Board},function(e){v=e.data},function(e){h=e.setSpriteAtlas,d=e.formatValWithBinary,f=e.copyTextToClipboard}],execute:function(){var _,b,m,C,L,D,K,E,A;p._RF.push({},"c23f4ejYmBPRJeYMiSy47/D","game",void 0);var Y=n.ccclass,k=n.property;e("Game",(_=Y("game"),b=k(s),m=k(g),C=k(c),_((K=l((D=function(e){function l(){for(var l,i=arguments.length,p=new Array(i),n=0;n<i;n++)p[n]=arguments[n];return l=e.call.apply(e,[this].concat(p))||this,a(l,"tileAtlas",K,t(l)),a(l,"m_board",E,t(l)),a(l,"m_bg",A,t(l)),l}i(l,e);var p=l.prototype;return p.onLoad=function(){y.on(o.EventType.KEY_UP,this._onKeyUp,this),v.loadImgPoses(),h(this.tileAtlas),this.m_board.node.on("onFinishLevel",this._onFinishLevel,this)},p.onDestroy=function(){y.off(o.EventType.KEY_UP,this._onKeyUp,this),this.m_board.node.off("onFinishLevel",this._onFinishLevel,this)},p.start=function(){this.initBoardWithLevel()},p._onFinishLevel=function(){var e=this;this.scheduleOnce((function(){e.jumpNextLevel()}),3)},p.initBoardWithLevel=function(){v.jumpLevel(1);var e=v.getCurLevelData();this.m_board.initWithTileMapConfig(e),v.needDebug()&&this.m_board.showDebug(!0)},p.jumpNextLevel=function(){v.nextLevel(),u("开启下一关",v.getNextLevel());var e=v.getCurLevelData();this.m_board.initWithTileMapConfig(e),v.needDebug()&&this.m_board.showDebug(!0)},p._onKeyUp=function(e){if(e.keyCode==T.KEY_Q){var l=this.m_board.tileArr[1],i=l.getValueWithAngle(),a=d(i,l.tileShape);u("tileA.angle",l.angle,"val",i,"ka",a)}else if(e.keyCode==T.KEY_W)this.m_board.showDebug(!0);else if(e.keyCode==T.KEY_E)this.m_board.showDebug(!1);else if(e.keyCode==T.KEY_R){var t=this.m_board.tileArr[1],p=t.getValueWithAngle();d(p,t.tileShape);this.m_board._getSideNearTiles(this.m_board.tileArr[0])}else if(e.keyCode==T.KEY_A){this.m_board.initWithTileMapConfig('{"width":3,"height":3,"shape":1,"tiles":[{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":40,"angle":-360,"specialType":0},{"tileType":0,"value":36,"angle":-180,"specialType":0},{"tileType":0,"value":56,"angle":-300,"specialType":0},{"tileType":0,"value":36,"angle":-360,"specialType":0},{"tileType":1,"value":32,"angle":-540,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":40,"angle":-600,"specialType":0},{"tileType":0,"value":36,"angle":-540,"specialType":0}]}'),this.m_board.showDebug(!0)}else if(e.keyCode==T.KEY_S)this.m_board.checkIsAllJoined();else if(e.keyCode==T.KEY_D)u("当前关卡",v.getNextLevel()),this.onBtnSave();else if(e.keyCode==T.KEY_F)this.m_board.doDisrupt();else if(e.keyCode==T.KEY_Z)this.jumpNextLevel();else if(e.keyCode==T.KEY_X){var n=JSON.parse('{"width":6,"height":7,"shape":1,"tiles":[{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":3,"value":32,"angle":-360,"specialType":0},{"tileType":0,"value":52,"angle":0,"specialType":0},{"tileType":3,"value":32,"angle":-180,"specialType":0},{"tileType":3,"value":32,"angle":-120,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":40,"angle":0,"specialType":0},{"tileType":0,"value":36,"angle":0,"specialType":0},{"tileType":0,"value":54,"angle":0,"specialType":0},{"tileType":0,"value":40,"angle":-180,"specialType":0},{"tileType":3,"value":32,"angle":-120,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":56,"angle":-300,"specialType":0},{"tileType":0,"value":36,"angle":0,"specialType":0},{"tileType":1,"value":32,"angle":-180,"specialType":0},{"tileType":0,"value":42,"angle":0,"specialType":0},{"tileType":0,"value":53,"angle":0,"specialType":0},{"tileType":3,"value":32,"angle":-180,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":40,"angle":-240,"specialType":0},{"tileType":0,"value":36,"angle":0,"specialType":0},{"tileType":0,"value":54,"angle":-120,"specialType":0},{"tileType":0,"value":40,"angle":-60,"specialType":0},{"tileType":3,"value":32,"angle":-240,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":3,"value":32,"angle":0,"specialType":0},{"tileType":0,"value":44,"angle":-180,"specialType":0},{"tileType":3,"value":32,"angle":-180,"specialType":0},{"tileType":3,"value":32,"angle":-240,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0}]}');v._term(n),this.m_board.initWithTileMapConfig(n),this.m_board.showDebug(!0)}},p.onBtnSave=function(){var e=this.m_board.getTileMapConfig();v._term(e);var l=JSON.stringify(e);f(l)},l}(r)).prototype,"tileAtlas",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=l(D.prototype,"m_board",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=l(D.prototype,"m_bg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=D))||L));p._RF.pop()}}}));

System.register("chunks:///_virtual/helper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,l,r,n,_,a,u;return{setters:[function(e){t=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){l=e.cclegacy,r=e.sys,n=e.native,_=e.log,a=e.resources,u=e.SpriteAtlas}],execute:function(){var o;e({copyTextToClipboard:function(e){if(r.isNative)n.copyTextToClipboard(e);else if(r.isBrowser){var t=document.createElement("textarea");t.textContent=e,document.body.appendChild(t),t.readOnly=!0,t.select(),t.setSelectionRange(0,t.textContent.length);try{var i=document.execCommand("copy");return document.body.removeChild(t),i?(_("已经复制到剪贴板"),!0):(_("复制到剪贴板失败"),!1)}catch(e){return _("复制到剪贴板失败"),!1}}},formatValWithBinary:x,getAngleDeltaByType:function(e){if(e==s.four)return 90;if(e==s.six)return 60},getReverseDir:function(e,t){var i=e>=2?e-2:e+2;t==s.six&&(i=e>=3?e-3:e+3);return i},getShapeOfTileValue:h,getTileFrame:function(e){return f.apply(this,arguments)},getTileName:function(e,t,i){var l=c[e];if(null==l)return null;if(l[i])return l[i]+(t?"_on":"");if(1==i&&null!=l[0])return l[0]+(t?"_on":"");if(0==i&&null!=l[1])return l[1]+(t?"_on":"");for(;--i>=0;)if(l[i])return l[i]+(t?"_on":"");return null},roatateValue:function(e,t,i){var l=x(e,t);if(i){var r=parseInt(l.slice(l.length-1));e>>=1,r<<=l.length-1,e+=r}else{var n=parseInt(l.slice(0,1));1==n&&(l="0"+l.slice(1),e=parseInt(l,2)),e<<=1,e+=n}return e},setSpriteAtlas:function(e){p=e}}),l._RF.push({},"9bb51GQxBZAk70HerpMz42B","helper",void 0);var s=e("TileShape",function(e){return e[e.four=0]="four",e[e.six=1]="six",e}({})),c=(e("TileType",function(e){return e[e.normal=0]="normal",e[e.power=1]="power",e[e.wifi=2]="wifi",e[e.lamp=3]="lamp",e}({})),e("TilePathSet",((o={})[6]=["tile_0110",null,"TW_1_03","TW_2_03","TW_3_03"],o[8]=[null,"tile_1000_special","TN_05"],o[10]=["tile_1010","tile_1010_special","TN_04"],o[12]=[null,"tile_1100_special","TN_03"],o[14]=["tile_1110","tile_1110_special","TW_1_02","TW_2_02","TW_3_02"],o[15]=["tile_1111","tile_1111_special","TW_1_01","TW_2_01","TW_3_01"],o[32]=[null,"tile_hex_100000_special"],o[36]=["tile_hex_100100","tile_hex_100100_special"],o[40]=["tile_hex_101000","tile_hex_101000_special"],o[42]=["tile_hex_101010","tile_hex_101010_special"],o[44]=["tile_hex_101100","tile_hex_101100_special"],o[48]=["tile_hex_110000","tile_hex_110000_special"],o[52]=["tile_hex_110100","tile_hex_110100_special"],o[53]=["tile_hex_110101","tile_hex_110101_special"],o[54]=["tile_hex_110110","tile_hex_110110_special"],o[56]=["tile_hex_111000","tile_hex_111000_special"],o[60]=["tile_hex_111100","tile_hex_111100_special"],o[62]=["tile_hex_111110","tile_hex_111110_special"],o[63]=["tile_hex_111111","tile_hex_111111_special"],o)));e("TileValueArr",Object.keys(c));var p=null;function f(){return(f=t(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==p){e.next=2;break}return e.abrupt("return",p.getSpriteFrame(t));case 2:e.next=4;break;case 4:return e.abrupt("return",new Promise((function(e,i){a.load("textures/plist_tiles",u,(function(i,l){if(i)e(null);else{var r=(p=l).getSpriteFrame(t);e(r)}}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return e<=15?s.four:s.six}function x(e,t){void 0===t&&(t=null),t=t||h(e);var i=e.toString(2);if(t==s.four)for(;i.length<4;)i="0"+i;else if(t==s.six)for(;i.length<6;)i="0"+i;return i}l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./RenderTools.ts","./bg.ts","./board.ts","./data.ts","./scene_editer.ts","./game.ts","./helper.ts","./node_tween_helper.ts","./tile.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/node_tween_helper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,r,s,o,a,h,g,u,c;return{setters:[function(t){e=t.createClass,n=t.inheritsLoose,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t.NodeEventType,o=t.Tween,a=t.Node,h=t.isValid,g=t.UIOpacity,u=t.UITransform,c=t.Sprite}],execute:function(){r._RF.push({},"bd2d4UUPzBEMawpaFwAAbXw","node_tween_helper",void 0);var l=new Map;function p(t,e){var n=l.get(t);if(null!=n){var i=n.get(e);if(null!=i)return i}return null}function f(t,e){var n=l.get(t);null!=n&&(null!=n.get(e)&&n.delete(e),0==n.size&&l.delete(t))}var d=function(t){function e(e,n){var r;return(r=t.call(this,e)||this)._node=null,r._tweenHelper=null,r.bClearWhenStop=!1,r.bIsRunning=!1,r._tweenHelper=i(r)._target,r._node=r._tweenHelper.target,r.bClearWhenStop=n,r}n(e,t);var r=e.prototype;return r.start=function(){return this.bIsRunning=!0,this._node&&(this._node.off(s.NODE_DESTROYED,this._onNodeDestroy,this),this._node.on(s.NODE_DESTROYED,this._onNodeDestroy,this)),t.prototype.start.call(this)},r.stop=function(e){void 0===e&&(e=null);var n=t.prototype.stop.call(this);this._node=this._target.target;var i=this._tag;return!1!==e&&this.bClearWhenStop&&f(this._node,i),this.bIsRunning=!1,n},r.getIsRunning=function(){return this.bIsRunning},r._onNodeDestroy=function(){this._tweenHelper._onNodeDestroy(this._node)},e}(o);t("NodeTweenHelper",function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1),this.target=null,this.tag=0,this.bClearWhenStop=!1,this._tw=null,this.target=t instanceof a?t:t.node,this.tag=e,this.bClearWhenStop=n}t.getTweenByTag=function(t,e){return void 0===e&&(e=0),p(t instanceof a?t:t.node,e)},t.create=function(e,n,i){var r;void 0===n&&(n=0),void 0===i&&(i=!1);var s=p(r=e instanceof a?e:e.node,n);return s&&(s.stop(),s._actions=[],s._finalAction=null),s?s._target:new t(r,n,i)};var n=t.prototype;return n.stop=function(){if(null!=this._tw)return this._tw.stop(),this._tw=null,f(this.target,this.tag),this},n._onNodeDestroy=function(t){this.stop()},n.getComponentsInChildren=function(t){return this.target.getComponentsInChildren(t)},n.removeFromParent=function(){return this.target.removeFromParent()},n.destroy=function(){return this.target.destroy()},n.getTween=function(){var t=l.get(this.target);null==t&&(t=new Map,l.set(this.target,t));var e=t.get(this.tag);return null==e&&(e=new d(this,this.bClearWhenStop),t.set(this.tag,e)),this._tw=e.tag(this.tag),this._tw},n.fadeOut=function(t){this.getTween().by(t,{opacity:0})},n.fadeIn=function(t){this.getTween().by(t,{opacity:255})},e(t,[{key:"active",get:function(){return!!h(this.target)&&this.target.active},set:function(t){h(this.target)&&(this.target.active=t)}},{key:"parent",get:function(){return h(this.target)?this.target.parent:null},set:function(t){h(this.target)&&(this.target.parent=t)}},{key:"position",get:function(){return h(this.target)?this.target.position:null},set:function(t){h(this.target)&&(this.target.position=t)}},{key:"x",get:function(){return h(this.target)?this.target.position.x:0},set:function(t){h(this.target)&&this.target.setPosition(t,this.y,this.z)}},{key:"y",get:function(){return h(this.target)?this.target.position.y:0},set:function(t){h(this.target)&&this.target.setPosition(this.x,t,this.z)}},{key:"z",get:function(){return h(this.target)?this.target.position.z:0},set:function(t){h(this.target)&&this.target.setPosition(this.x,this.y,t)}},{key:"opacity",get:function(){if(!h(this.target))return 0;var t=this.target.getComponent(g);return null==t&&(t=this.target.addComponent(g)),t.opacity},set:function(t){if(h(this.target)){var e=this.target.getComponent(g);null==e&&(e=this.target.addComponent(g)),e.opacity=t}}},{key:"scale",get:function(){return h(this.target)?this.target.scale.x:0},set:function(t){h(this.target)&&this.target.setScale(t,t,t)}},{key:"scaleX",get:function(){return h(this.target)?this.target.scale.x:0},set:function(t){h(this.target)&&this.target.setScale(t,this.target.scale.y,this.target.scale.z)}},{key:"scaleY",get:function(){return h(this.target)?this.target.scale.y:0},set:function(t){h(this.target)&&this.target.setScale(this.target.scale.x,t,this.target.scale.z)}},{key:"anchorX",get:function(){return h(this.target)?this.target.getComponent(u).anchorX:0},set:function(t){h(this.target)&&(this.target.getComponent(u).anchorX=t)}},{key:"anchorY",get:function(){return h(this.target)?this.target.getComponent(u).anchorY:0},set:function(t){h(this.target)&&(this.target.getComponent(u).anchorY=t)}},{key:"width",get:function(){return h(this.target)?this.target.getComponent(u).width:0},set:function(t){h(this.target)&&(this.target.getComponent(u).width=t)}},{key:"height",get:function(){return h(this.target)?this.target.getComponent(u).height:0},set:function(t){h(this.target)&&(this.target.getComponent(u).height=t)}},{key:"spriteFrame",get:function(){return h(this.target)?this.target.getComponent(c).spriteFrame:null},set:function(t){h(this.target)&&((this.target.getComponent(c)||this.target.addComponent(c)).spriteFrame=t)}},{key:"angle",get:function(){return h(this.target)?this.target.angle:0},set:function(t){h(this.target)&&(this.target.angle=t)}}]),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/RenderTools.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,h,a,u,s,c,d,l,f;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,i=e.view,o=e.screen,h=e.UITransform,a=e.Node,u=e.director,s=e.v3,c=e.Camera,d=e.Layers,l=e.RenderTexture,f=e.sys}],execute:function(){n._RF.push({},"70c0dwOyPZLl6qdA91EoH19","RenderTools",void 0);e("RenderTools",function(){function e(){}return e.getPixelsData=function(){var e=t(r().mark((function e(n,p){var v,y,x,m,T,R;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===p&&(p=null),v=i.getVisibleSize(),o.windowSize,o.resolution,null,(y=n.getComponent(h).getBoundingBoxToWorld()).width=Math.floor(y.width),y.height=Math.floor(y.height),x=i.getDesignResolutionSize(),null==p&&(m=new a,u.getScene().addChild(m),m.position=s(.5*x.width,.5*x.height),(p=m.addComponent(c)).visibility=d.Enum.UI_2D),o.windowSize.height,i.getScaleY(),p.orthoHeight=v.height/2,T=p.targetTexture,(R=new l).reset({width:v.width,height:v.height}),p.targetTexture=R,e.abrupt("return",new Promise((function(e,n){p.scheduleOnce(t(r().mark((function t(){var n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=R.readPixels(),i=w(n,R.width,y),"iOS"==f.os&&(i=g(i,y.width,y.height)),p.targetTexture=T,e(i);case 6:case"end":return t.stop()}}),t)}))))})));case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),e.saveFile=function(e,t,r,n){},e}());function g(e,t,r){for(var n=new Uint8Array(t*r*4),i=4*t,o=0;o<r;o++)for(var h=(r-1-o)*t*4,a=o*t*4,u=0;u<i;u++)n[a+u]=e[h+u];return n}function w(e,t,r){for(var n=(r={x:Math.floor(r.x),y:Math.floor(r.y),width:Math.floor(r.width),height:Math.floor(r.height)}).width*r.height*4,i=new Uint8Array(n),o=4*r.width,h=0,a=r.y+r.height-1;a>=r.y;a--)for(var u=a*t*4+4*r.x,s=0;s<o;s++)i[h++]=e[u+s];return i}n._RF.pop()}}}));

System.register("chunks:///_virtual/scene_editer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./helper.ts","./data.ts","./board.ts","./tile.ts","./node_tween_helper.ts"],(function(e){var l,i,t,a,p,n,r,s,o,T,y,u,c,g,d,h,v,f,b,m,_,S,w,C,x,E,I,k,D,A,K,O,U,Y;return{setters:[function(e){l=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.createForOfIteratorHelperLoose,a=e.initializerDefineProperty,p=e.assertThisInitialized,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy,o=e._decorator,T=e.SpriteAtlas,y=e.EditBox,u=e.Label,c=e.Layout,g=e.input,d=e.Input,h=e.KeyCode,v=e.log,f=e.color,b=e.UITransform,m=e.Node,_=e.js,S=e.Component},function(e){w=e.setSpriteAtlas,C=e.TileValueArr,x=e.TileType,E=e.TileShape,I=e.formatValWithBinary,k=e.copyTextToClipboard,D=e.getShapeOfTileValue,A=e.getTileName},function(e){K=e.data},function(e){O=e.Board},function(e){U=e.Tile},function(e){Y=e.NodeTweenHelper}],execute:function(){var V,B,z,H,P,F,L,M,N,R,W,j,J,G,q;s._RF.push({},"50196PF7PVLVqrA/kloY73R","scene_editer",void 0);var Q=o.ccclass,X=o.property;o.executeInEditMode,e("scene_debug",(V=Q("scene_debug"),B=X(T),z=X(O),H=X(y),P=X(U),F=X(u),L=X(c),V((R=l((N=function(e){function l(){for(var l,i=arguments.length,t=new Array(i),n=0;n<i;n++)t[n]=arguments[n];return l=e.call.apply(e,[this].concat(t))||this,a(l,"tileAtlas",R,p(l)),a(l,"board",W,p(l)),a(l,"edit",j,p(l)),a(l,"tmpTile",J,p(l)),a(l,"txtIdx",G,p(l)),a(l,"layout",q,p(l)),l}i(l,e);var s=l.prototype;return s.onLoad=function(){g.on(d.EventType.KEY_UP,this._onKeyUp,this),K.loadImgPoses(),w(this.tileAtlas),this.board.node.destroyAllChildren(),this.tmpTile.setBoard(this.board)},s.onDestroy=function(){g.off(d.EventType.KEY_UP,this._onKeyUp,this)},s.start=function(){var e=n(r().mark((function e(){var l,i,a,p,n,s,o,T,y,u,c,g=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.loadImgPoses();case 2:for(l=e.sent,console.table(l),this.board._initShape(),this.board.showDebug(!0,f(255,255,0)),this.scheduleOnce((function(){g.board.tileShape=E.four,g.updateTempStr()})),i=function(e){var l=Date.now(),i=e.target._lastStramp&&l-e.target._lastStramp<200;e.target._lastStramp=l;var t=e.target.getComponent(U),a=(Y.create(t.img.node.parent).getTween().stop(),t.tileType),p=t.tileShape,n=t.node.name,r=parseInt(n,2);if(n.indexOf("_")>-1?("lamp_1000"==n?a=x.lamp:"wifi_1000"==n||"wifi_1100"==n?a=x.wifi:"power_1000"==n&&(a=x.power),"wifi_1100"==n?(p=E.four,r=parseInt("1100",2)):(p=p==E.six?E.four:E.six,r=parseInt(p==E.six?"100000":"1000",2)),t.tileShape=p,t.tileType=a,t.setValue(r),n=n.replace(/\d+/,I(r,p))):(i&&(0==t.specialType?A(t.value,!1,1)&&(t.specialType=1):1==t.specialType&&A(t.value,!1,0)&&(t.specialType=0)),p=D(r),t.tileShape=p,t.tileType=x.normal,t.setValue(r)),t.showDebug(!0),g.tmpTile.init({board:g.board,tileType:a,value:r,specialType:t.specialType,angle:0}),g.tmpTile.tileShape=p,g.tmpTile.showDebug(!0),g.board.tileShape!=p)return g.txtIdx.string=g.getTileKeyIdx(g.edit.string)+"形状不符合!!",g.txtIdx.color=f(255,0,0),void(g.edit.string=n);g.txtIdx.color=f(0,255,0),g.edit.string=n,g.txtIdx.string=g.getTileKeyIdx(g.edit.string),g.updateTempStr()},a=t(this.layout.node.children);!(p=a()).done;)n=p.value,s=n.children[0],(o=s&&s.getComponent(U))&&(T=o.tileType,y=o.tileShape,u=o.node.name,c=parseInt(u,2),u.indexOf("_")>-1?("lamp_1000"==u?T=x.lamp:"wifi_1000"==u||"wifi_1100"==u?T=x.wifi:"power_1000"==u&&(T=x.power),"wifi_1100"==u?(y=E.four,c=parseInt("1100",2)):(y=E.four,c=parseInt("1000",2)),o.tileShape=y,o.tileType=T,o.setValue(c)):(y=D(c),o.tileShape=y,o.tileType=x.normal,o.setValue(c)),o.node.on(m.EventType.TOUCH_END,i,this));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s._onKeyUp=function(e){if(e.keyCode==h.KEY_Q)this.board._initShape();else if(e.keyCode==h.KEY_W)this.board.showDebug(!0);else if(e.keyCode==h.KEY_E)this.board.showDebug(!1);else if(e.keyCode==h.KEY_A)this.board.scale=.3;else if(e.keyCode==h.KEY_S){this.board.initWithTileMapConfig('{"width":5,"height":6,"shape":1,"tiles":[{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":3,"value":32,"angle":-360,"specialType":0},{"tileType":0,"value":52,"angle":0,"specialType":0},{"tileType":3,"value":32,"angle":-180,"specialType":0},{"tileType":3,"value":32,"angle":-120,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":40,"angle":0,"specialType":0},{"tileType":0,"value":36,"angle":0,"specialType":0},{"tileType":0,"value":54,"angle":0,"specialType":0},{"tileType":0,"value":40,"angle":-180,"specialType":0},{"tileType":3,"value":32,"angle":-120,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":56,"angle":-300,"specialType":0},{"tileType":0,"value":36,"angle":0,"specialType":0},{"tileType":1,"value":32,"angle":-180,"specialType":0},{"tileType":0,"value":42,"angle":0,"specialType":0},{"tileType":0,"value":53,"angle":0,"specialType":0},{"tileType":3,"value":32,"angle":-180,"specialType":0},{"tileType":0,"value":40,"angle":-240,"specialType":0},{"tileType":0,"value":36,"angle":0,"specialType":0},{"tileType":0,"value":54,"angle":-120,"specialType":0},{"tileType":0,"value":40,"angle":-60,"specialType":0},{"tileType":3,"value":32,"angle":-240,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":3,"value":32,"angle":0,"specialType":0},{"tileType":0,"value":44,"angle":-180,"specialType":0},{"tileType":3,"value":32,"angle":-180,"specialType":0},{"tileType":3,"value":32,"angle":-240,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0}]}'),this.board.showDebug(!0)}else if(e.keyCode==h.KEY_D){this.board.initWithTileMapConfig('{"width":6,"height":7,"shape":1,"tiles":[{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":3,"value":32,"angle":-360,"specialType":0},{"tileType":0,"value":52,"angle":0,"specialType":0},{"tileType":3,"value":32,"angle":-180,"specialType":0},{"tileType":3,"value":32,"angle":-120,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":40,"angle":0,"specialType":0},{"tileType":0,"value":36,"angle":0,"specialType":0},{"tileType":0,"value":54,"angle":0,"specialType":0},{"tileType":0,"value":40,"angle":-180,"specialType":0},{"tileType":3,"value":32,"angle":-120,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":56,"angle":-300,"specialType":0},{"tileType":0,"value":36,"angle":0,"specialType":0},{"tileType":1,"value":32,"angle":-180,"specialType":0},{"tileType":0,"value":42,"angle":0,"specialType":0},{"tileType":0,"value":53,"angle":0,"specialType":0},{"tileType":3,"value":32,"angle":-180,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":40,"angle":-240,"specialType":0},{"tileType":0,"value":36,"angle":0,"specialType":0},{"tileType":0,"value":54,"angle":-120,"specialType":0},{"tileType":0,"value":40,"angle":-60,"specialType":0},{"tileType":3,"value":32,"angle":-240,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":3,"value":32,"angle":0,"specialType":0},{"tileType":0,"value":44,"angle":-180,"specialType":0},{"tileType":3,"value":32,"angle":-180,"specialType":0},{"tileType":3,"value":32,"angle":-240,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0},{"tileType":0,"value":0,"angle":0,"specialType":0}]}'),this.board.showDebug(!0)}else if(e.keyCode==h.KEY_F){var l=this.board.checkIsAllJoined();v(l)}else if(e.keyCode==h.KEY_G){var i=this.board.tileArr[9],t=this.board.tileArr[11],a=this.board.checkIsJoined(i,t);v("isJoined",a)}},s.getTileKeyIdx=function(e){var l,i=parseInt(e,2);return null==(l=C.indexOf(i+""))&&(l="null"),l},s.onToggle=function(e){var l=this.edit.string,i=parseInt(l,2),t=x.normal,a=e.node;"Toggle_shape"==a.name?(this.board.tileShape=e.isChecked?E.six:E.four,this.updateTempStr()):"Toggle_debug"==a.name&&this.board.showDebug(e.isChecked),this.tmpTile.init({board:this.board,tileType:t,value:i,specialType:0,angle:0})},s.updateTempStr=function(){var e,l;this.edit.string;this.board.showDebug(!0,f(0,255,255)),this.board.tileShape==E.four?(e=256,l=256):this.board.tileShape==E.six&&(e=220,l=2/1.73205*220);var i=this.tmpTile.node.getComponent(b);i.width=l,i.height=e;for(var a,p=this.board.tileArr,n=t(p);!(a=n()).done;){var r=a.value;r.offClick(),r.node.off(m.EventType.TOUCH_START,this._onClickTileESTart,this),r.node.on(m.EventType.TOUCH_START,this._onClickTileESTart,this),r.node.off(m.EventType.TOUCH_END,this._onClickTileEnd,this),r.node.on(m.EventType.TOUCH_END,this._onClickTileEnd,this)}},s._onClickTileESTart=function(e){e.target._startTouchTime=Date.now()},s._onClickTileEnd=function(e){var l=this,i=e.target.getComponent(U);if(Date.now()-e.target._startTouchTime>2e3)i.clear();else{var t=this.board.getCoord(i),a=t.i,p=t.j;if(this.board.tileShape==this.tmpTile.tileShape){var n=this.tmpTile.value,r=this.tmpTile.tileType;this.tmpTile.tileShape;if(0==n)return this.txtIdx.string="temp为空!!",void(this.txtIdx.color=f(255,0,0));var s=Date.now();e.target._lastStramp&&s-e.target._lastStramp<200||null==i.img.spriteFrame?i.init({board:this.board,tileType:r,value:n,specialType:0,angle:0}):i.doRoatate().then((function(e){i.tileType==x.power&&(i.angle=e);var t=i.getValueWithAngle(),n=I(t,i.tileShape);l.board.onChangleTileAngle(i),v(_.formatStr("i:%s, j:%s, kkk:%s",a,p,n))})),e.target._lastStramp=s}else console.log("形状不匹配")}},s.onBtnSave=function(){var e=this.board.getTileMapConfig();K._term(e);var l=JSON.stringify(e);k(l)},s.onBtnDisrupt=function(){this.board.doDisrupt()},s.onBtnClear=function(){this.board.clear()},s.onBtnFill=function(){var e=this.board.getTileMapConfig();K._term(e),this.board.initWithTileMapConfig(e)},l}(S)).prototype,"tileAtlas",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=l(N.prototype,"board",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=l(N.prototype,"edit",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=l(N.prototype,"tmpTile",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=l(N.prototype,"txtIdx",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=l(N.prototype,"layout",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=N))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/tile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./helper.ts","./data.ts","./node_tween_helper.ts"],(function(e){var t,i,n,o,r,l,a,s,p,h,u,_,c,f,g,d,m,y,w,b,T,v,S,C,O;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.createClass,o=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,p=e._decorator,h=e.Enum,u=e.Sprite,_=e.UITransform,c=e.Node,f=e.log,g=e.v3,d=e.Component},function(e){m=e.TileType,y=e.TileShape,w=e.getAngleDeltaByType,b=e.roatateValue,T=e.getTileFrame,v=e.getTileName,S=e.formatValWithBinary},function(e){C=e.data},function(e){O=e.NodeTweenHelper}],execute:function(){var F,k,D,j,N,B,P,I,V,z,x,E,R;s._RF.push({},"7896704qh5Imos6lXo8on0F","tile",void 0);var A=p.ccclass,H=p.property;p.executeInEditMode,e("Tile",(F=A("tile"),k=H({type:h(m),serializable:!0}),D=H({type:h(y),serializable:!0}),j=H(u),N=H(u),B=H({type:u,visible:function(){return this.tileType!=m.normal}}),P=H({type:u,visible:function(){return this.tileType!=m.normal}}),F((t((V=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this)._tileType=m.normal,t._tileShape=y.six,o(t,"_border",z,r(t)),o(t,"_img",x,r(t)),o(t,"_lamp_wifi_power",E,r(t)),o(t,"_light",R,r(t)),t._board=null,t._value=0,t._isOn=!1,t._specialType=0,t._angle=0,t.row=0,t.col=0,t}i(t,e);var s=t.prototype;return s.setBoard=function(e){this._board=e,this.tileShape!=e.tileShape&&(this.tileShape=e.tileShape)},s.doDisrupt=function(){if(this.tileType!=m.power){var e=w(this.tileShape);this.angle=e*Math.floor(Math.random()*(360/e))}},s.onLoad=function(){null==this.getComponent(_)&&this.addComponent(_),this.node.on(c.EventType.TOUCH_END,this._onClick,this)},s.offClick=function(){this.node.off(c.EventType.TOUCH_END,this._onClick,this)},s.start=function(){},s.init=function(e){this._board=e.board,this._value=e.value,this._specialType=e.specialType,this._tileShape=e.board.tileShape,this._tileType=e.tileType,this.angle=e.angle||0,this._isOn=this.tileType==m.power,this._adjustValue(),this._updateFrame()},s._adjustValue=function(){this.tileType!=m.lamp&&this.tileType!=m.power&&this.tileType!=m.wifi||(this.tileShape==y.four?this._value!=parseInt("1100",2)&&(this._value=parseInt("1000",2)):this.tileShape==y.six&&(this._value=parseInt("100000",2)))},s.setValue=function(e){this._value=e,this._adjustValue(),this._updateFrame()},s.getValueWithAngle=function(){var e=this._angle/w(this.tileShape),t=this._value;if(e<0)for(;e++<0;)t=b(t,this.tileShape,!0);else if(e>0)for(;e-- >0;)t=b(t,this.tileShape,!1);return t},s.setIsOn=function(e){this.tileType!=m.power&&(this._isOn=e,this._updateFrame())},s.isOn=function(){return this._isOn},s.showDebug=function(e,t){var i=this;if(void 0===t&&(t=null),null!=this.border){this.img&&t&&(this.img.color=t),this.border.node.active=e;var n="tutorial_square";this.tileShape==y.six&&(n="tutorial_hex"),T(n).then((function(e){i.border.spriteFrame=e}))}},s._updateFrame=function(){var e=this;if(0!=this._value){var t=v(this._value,this._isOn,this._specialType);if(null!=this.img){t&&T(t="tiles/"+t).then((function(i){null!=i?e.img.spriteFrame=i:f("1 frame==null",t)})),C.getImgPosOfTile(S(this._value,this.tileShape),this.specialType).then((function(t){t&&(e.img.node.position=t)}));var i=this.tileShape==y.four?.8:.7;if(this.lamp_wifi_power.node.scale=g(i,i,i),this.lamp_wifi_power.node.active=this.tileType!=m.normal,this.light&&(this.light.node.active=this.tileType!=m.normal&&this._isOn),this.tileType==m.normal);else{var n=null;this.tileType==m.lamp?n="tile_bulb":this.tileType==m.power?n="tile_source":this.tileType==m.wifi&&(n="tile_wifii"),T(n).then((function(t){null!=t?e.lamp_wifi_power.spriteFrame=t:f("2 frame==null",n)}))}}}},s._onClick=function(){null!=this.img.spriteFrame&&this.doRoatate()},s.doRoatate=function(){var e=l(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){var n=t._angle-w(t.tileShape),o=.1,r=O.create(t.img.node.parent).getTween().stop();t.tileType!=m.power?r.to(o,{angle:n}).call((function(){t.angle=n,t._board&&t._board.onChangleTileAngle(t),e(n)})).start():r.to(.025,{angle:t._angle-5}).to(.025,{angle:t._angle}).to(.025,{angle:t._angle+5}).to(.025,{angle:t._angle}).call((function(){e(n)})).start()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.clear=function(){this._value=0,this._specialType=0,this._tileShape=0,this._tileType=0,this.angle=0,this._isOn=!1,this.lamp_wifi_power.spriteFrame=null,this.img.spriteFrame=null,this.lamp_wifi_power.node.active=!1,this.light.node.active=!1},n(t,[{key:"tileType",get:function(){return this._tileType},set:function(e){this._tileType=e,"temp_tile"==this.node.name&&console.trace(e),this._adjustValue(),this._updateFrame()}},{key:"tileShape",get:function(){return this._tileShape},set:function(e){this._tileShape=e,this._adjustValue(),this._updateFrame()}},{key:"border",get:function(){return null!=this.node.getChildByName("border")?this._border=this.node.getChildByName("border").getComponent(u):(this._border=(new c).addComponent(u),this._border.node.parent=this.node,this._border.node.name="border"),this._border},set:function(e){this._border=e}},{key:"img",get:function(){if(null==this._img){var e=this.node.getChildByName("node");null==e&&((e=new c("node")).parent=this.node),this._img=(new c).addComponent(u),this._img.node.parent=e,this._img.node.name="img"}return this._img},set:function(e){this._img=e}},{key:"lamp_wifi_power",get:function(){return null!=this.node.getChildByName("lamp_wifi_power")?this._lamp_wifi_power=this.node.getChildByName("lamp_wifi_power").getComponent(u):(this._lamp_wifi_power=(new c).addComponent(u),this._lamp_wifi_power.node.parent=this.node,this._lamp_wifi_power.node.name="lamp_wifi_power"),this._lamp_wifi_power},set:function(e){this._lamp_wifi_power=e}},{key:"light",get:function(){return null!=this.node.getChildByName("light")?this._light=this.node.getChildByName("light").getComponent(u):(this._light=(new c).addComponent(u),this._light.node.parent=this.node,this._light.node.name="light"),this._light},set:function(e){this._light=e}},{key:"value",get:function(){return this._value}},{key:"specialType",get:function(){return this._specialType},set:function(e){this._specialType=e,this._updateFrame()}},{key:"angle",get:function(){return this._angle},set:function(e){this._angle=e,this.img.node.parent.angle=this._angle}}]),t}(d)).prototype,"tileType",[k],Object.getOwnPropertyDescriptor(V.prototype,"tileType"),V.prototype),t(V.prototype,"tileShape",[D],Object.getOwnPropertyDescriptor(V.prototype,"tileShape"),V.prototype),z=t(V.prototype,"_border",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(V.prototype,"border",[j],Object.getOwnPropertyDescriptor(V.prototype,"border"),V.prototype),x=t(V.prototype,"_img",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(V.prototype,"img",[N],Object.getOwnPropertyDescriptor(V.prototype,"img"),V.prototype),E=t(V.prototype,"_lamp_wifi_power",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(V.prototype,"lamp_wifi_power",[B],Object.getOwnPropertyDescriptor(V.prototype,"lamp_wifi_power"),V.prototype),R=t(V.prototype,"_light",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(V.prototype,"light",[P],Object.getOwnPropertyDescriptor(V.prototype,"light"),V.prototype),I=V))||I));s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});