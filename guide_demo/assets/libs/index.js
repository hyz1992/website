System.register("chunks:///_virtual/EditorAssets.ts",["cc"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy,e=t.warn}],execute:function(){n._RF.push({},"30eb5XBO9hFp6g/AAeV2xn9","EditorAssets",void 0);t("default",function(){function t(){}return t.load=function(t,n,r){return new Promise((function(t){return t(null),void e("[EditorAsset]","该函数只在编辑器环境内有效！")}))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/function.ts",["cc"],(function(n){var r;return{setters:[function(n){r=n.cclegacy}],execute:function(){var t,e;n("_funcs",void 0),r._RF.push({},"b288bU1YzBIZrjeOfdQAI/i","function",void 0),(e=t||(t=n("_funcs",{}))).formatNumberWithThousandSeparator=function(n){if(void 0===n&&(n=0),"number"!=typeof n)return"";var r=n.toString().split("."),t=r[0].replace(/\B(?=(\d{3})+$)/g,",");return r.length>1&&(t+="."+r[1]),t},e.checkPolygonContainPoint=function(n,r){for(var t=n.x,e=n.y,i=!1,u=0,o=r.length,c=o-1;u<o;c=u,u++){var f=r[u].x,a=r[u].y,s=r[c].x,v=r[c].y;if(f===t&&a===e||s===t&&v===e)return 0;if(a<e&&v>=e||a>=e&&v<e){var g=f+(e-a)*(s-f)/(v-a);if(g===t)return 0;g>t&&(i=!i)}}return i?-1:1},r._RF.pop()}}}));

System.register("chunks:///_virtual/guide_config.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,u;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,u=e.assetManager}],execute:function(){function i(e,t){return new Promise((function(n,r){e.load(t,(function(e,t){n(e?null:t)}))}))}function s(e,r){return new Promise(t(n().mark((function s(c,a){var o;return n().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(null!=(o=u.getBundle(e))){s.next=5;break}u.loadBundle(e,t(n().mark((function e(t,u){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return o=u,e.t0=c,e.next=6,i(o,r);case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})))),s.next=10;break;case 5:return s.t0=c,s.next=8,i(o,r);case 8:s.t1=s.sent,(0,s.t0)(s.t1);case 10:case"end":return s.stop()}}),s)}))))}r._RF.push({},"075f8Y7Z1JJRq5KTcpbNqzH","guide_config",void 0),e("guide_config",function(){function e(){this._guideCfgs=null}e.getInstance=function(){return null==this._inst&&(this._inst=new e),this._inst};var r=e.prototype;return r.load=function(){var e=t(n().mark((function e(t,r){var u,i,c,a,o,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r="resources"),null==this._guideCfgs){e.next=3;break}return e.abrupt("return",this._guideCfgs);case 3:return e.next=5,s(r,t);case 5:if(u=e.sent)for(c in this._guideCfgs=null!=(i=this._guideCfgs)?i:{},u.json)a=u.json[c],null==(o=this._guideCfgs[a.guideId])&&(this._guideCfgs[a.guideId]=o=[]),f=a.tipPrefab,a.tipPrefab=null,f&&f.length>0&&(a.tipPrefab={bundleName:f[0],prefabPath:f[1]}),a.clickType=parseInt(a.clickType),2!=a.clickType&&1!=a.clickType&&(a.clickType=0),"object"!=typeof a.hollowoutParam&&(a.hollowoutParam=null),o.push(a);return e.abrupt("return",this._guideCfgs);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),r.getGuideConfig=function(e){return this._guideCfgs[e]},e}())._inst=null,r._RF.pop()}}}));

System.register("chunks:///_virtual/guide_hollow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./guide_step.ts"],(function(e){var t,r,o,i,n,a,h,u,s,l,c,p,S,d,w,f;return{setters:[function(e){t=e.inheritsLoose,r=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){i=e.cclegacy,n=e._decorator,a=e.Sprite,h=e.director,u=e.Director,s=e.v2,l=e.UITransform,c=e.Component,p=e.Material,S=e.Tween,d=e.tween},function(e){w=e.HollowShape,f=e.guide_step}],execute:function(){var _;i._RF.push({},"6c0a5MiCjhPXZKzP2Mu4uOr","guide_hollow",void 0);var m=n.ccclass,P=(n.property,n.requireComponent),g=(n.executeInEditMode,n.disallowMultiple),y=n.executionOrder;e("default",m(_=P(a)(_=g(_=y(-10)(_=function(e){function i(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this)._curStep=null,t.material=null,t.tweenRes=null,t._oldShape=w.None,t}t(i,e);var n=i.prototype;return n.onLoad=function(){h.on(u.EVENT_BEFORE_SCENE_LAUNCH,this._onBeforeSceneLaunch,this),this.init()},n.onDestroy=function(){h.off(u.EVENT_BEFORE_SCENE_LAUNCH,this._onBeforeSceneLaunch,this)},n._onBeforeSceneLaunch=function(){this._oldShape=w.None},n.init=function(){var e=r(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.material){e.next=7;break}if(!hyz.hollowEffect){e.next=6;break}this.material=new p,this.material.initialize({effectAsset:hyz.hollowEffect}),e.next=7;break;case 6:return e.abrupt("return");case 7:(t=this.node.getComponent(a))&&(t.sizeMode=a.SizeMode.CUSTOM,t.spriteFrame=hyz.whiteDot_spriteFrame,t.customMaterial=this.material,this.updateProperties());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateProperties=function(){var e=this.material;null!=this._curStep&&(e.setProperty("aspectRatio",this.getNodeSize().y/this.getNodeSize().x),e.setProperty("holeShape",this._curStep.hollowParam.holeShape),e.setProperty("center",this.getCenter(this._curStep.hollowParam.center)),e.setProperty("radius",this.getWidth(this._curStep.hollowParam.radius)),e.setProperty("rectSize",s(this.getWidth(this._curStep.rectSize.width),this.getHeight(this._curStep.rectSize.height))),e.setProperty("roundCorner",this.getRound(this._curStep.hollowParam.round)),e.setProperty("opacity",this._curStep.hollowParam.opacity/255))},n.fillHollowout=function(){if(null!=this._curStep){var e=this._curStep.holeShape;this._curStep.holeShape=w.None,this.updateProperties(),this._curStep.holeShape=e}},n.tweenTo=function(){var e=r(o().mark((function e(t,r,i){var n,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r=!1),void 0===i&&(i=.2),null!=this._curStep&&this._oldShape!=w.None&&!r){e.next=18;break}if(this._oldShape=t.holeShape,t.holeShape!=w.None){e.next=9;break}this._curStep=f.createWithClickGuide(t.hollowParam,t.tag),this.updateProperties(),e.next=17;break;case 9:return(n=f.createWithClickGuide(t.hollowParam,t.tag)).radius&&(n.radius*=2),n.rectSize&&(n.rectSize.width*=2,n.rectSize.height*=2),n.opacity&&(n.opacity=0),this._curStep=n,this.updateProperties(),e.next=17,this.tweenTo(t,!1,.2);case 17:return e.abrupt("return");case 18:if(t.holeShape!=w.None&&!this._curStep.equals(t)){e.next=28;break}return this._curStep.center=t.hollowParam.center,this._curStep.radius=t.hollowParam.radius,this._curStep.rectSize=t.hollowParam.rectSize,this._curStep.holeShape=t.hollowParam.holeShape,this._curStep.opacity=t.hollowParam.opacity,this._curStep.round=t.hollowParam.round,this.updateProperties(),this._oldShape=t.holeShape,e.abrupt("return");case 28:return this._oldShape=t.holeShape,this._curStep.hollowParam.holeShape=t.hollowParam.holeShape,e.abrupt("return",new Promise((function(e){S.stopAllByTarget(a),a.unscheduleAllCallbacks(),null!=a.tweenRes&&a.tweenRes(),a.tweenRes=e,d(a._curStep).to(i,{center:t.hollowParam.center,radius:t.hollowParam.radius,rectSize:t.hollowParam.rectSize,holeShape:t.hollowParam.holeShape,opacity:t.hollowParam.opacity,round:t.hollowParam.round},{onUpdate:function(e,t){a.updateProperties()}}).call((function(){a.scheduleOnce((function(){a.tweenRes&&(a.tweenRes(),a.tweenRes=null)}))})).start()})));case 31:case"end":return e.stop()}}),e,this)})));return function(t,r,o){return e.apply(this,arguments)}}(),n.getCenter=function(e){var t=this.getComponent(l),r=t.width,o=t.height,i=(e.x+r/2)/r,n=(-e.y+o/2)/o;return s(i,n)},n.getNodeSize=function(){var e=this.getComponent(l),t=e.width,r=e.height;return s(t,r)},n.getWidth=function(e){return e/this.getComponent(l).width},n.getHeight=function(e){return e/this.getComponent(l).width},n.getRound=function(e){return e/this.getComponent(l).width},i}(c))||_)||_)||_)||_);i._RF.pop()}}}));

System.register("chunks:///_virtual/guide_manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./touch_blocker.ts","./guide_step.ts","./guide_hollow.ts","./guide_tip_base.ts","./persist_nodes.ts"],(function(e){var t,n,i,r,l,u,o,a,s,c,p,d,h,f,g,v,b,_,w,S,k,m,P,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.asyncToGenerator,u=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e._decorator,s=e.instantiate,c=e.Widget,p=e.error,d=e.assetManager,h=e.sys,f=e.log,g=e.Component,v=e.isValid,b=e.find,_=e.assert},function(e){w=e.default},function(e){S=e.guide_step},function(e){k=e.default},function(e){m=e.guide_tip_base},function(e){P=e.getPersistNode,I=e.PersistNodeNames}],execute:function(){var x,y,A,G,F,N,E,W;o._RF.push({},"d08d06nxWdHBow04xjD4LNU","guide_manager",void 0);var B=a.property,O=a.ccclass,H=function(e){return e[e.None=0]="None",e[e.guiding=1]="guiding",e[e.paused=2]="paused",e[e.closed=3]="closed",e}(H||{}),U=null;e("guide_manager",(x=O("guide_manager"),y=B(k),A=B(w),x(((W=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return t=e.call.apply(e,[this].concat(l))||this,i(t,"hollowOut",N,r(t)),i(t,"touchBlocker",E,r(t)),t._clickSteps=[],t._curStep=null,t._state=H.None,t._tipUIs={},t}n(t,e);var o=t.prototype;return o.setSteps=function(e){this._clickSteps=e,this._state=H.None},o.addStep=function(e){this._clickSteps.push(e)},o.insertNextStep=function(e){this._clickSteps.unshift(e)},o.checkGoNextStep=function(){var e=l(u().mark((function e(){var n,i,r,l,o,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._curStep,this._curStep=null,0!=this._clickSteps.length){e.next=6;break}this.closeCurStep(),e.next=25;break;case 6:if(this._state=H.guiding,null==(o=this._clickSteps.splice(0,1)[0])||null==(i=o.showEvent)||!i.onBeforeAppear){e.next=12;break}if(!(null==o||null==(a=o.showEvent)?void 0:a.onBeforeAppear(o))){e.next=12;break}return e.abrupt("return");case 12:if(!t.checkHasGuideFinished(o.guideId)){e.next=14;break}return e.abrupt("return");case 14:return s=!1,this.hollowOut.node.active||(s=!0),this.show(),this._curStep=o,C("GUIDE_LOG,checkGoNextStep,下一步",o.tag),this.touchBlocker.blockAll(),e.next=22,this.hollowOut.tweenTo(o,s);case 22:this.touchBlocker.setStep(o),null!=o&&null!=(r=o.showEvent)&&r.onWillAppear&&(o.showEvent.onWillAppear(o),o.showEvent.onWillAppear=null),null!=n&&null!=(l=n.showEvent)&&l.onWillFinish&&n.showEvent.onWillFinish(n);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.pause=function(){this.hide(),this._state=H.paused},o.closeCurStep=function(){var e;if(this._state!=H.closed){this._state=H.closed,C("GUIDE_LOG,closeCurStep",null==(e=this._curStep)?void 0:e.tag,"this._clickSteps.length",this._clickSteps.length);var t,n,i,r=this._curStep;if(this._curStep=null,r)null!=(t=r.showEvent)&&t.onWillFinish&&r.showEvent.onWillFinish(r);if(this._state==H.closed)if(this.hide(),null!=r&&null!=(n=r.showEvent)&&n.onAfterHide)null==r||null==(i=r.showEvent)||i.onAfterHide(r)}},o.show=function(){this.node.active=!0,this.hollowOut.node.active=!0,this.touchBlocker.node.active=!0},o.hide=function(){this.hollowOut.node.active=!1,this.touchBlocker.passAll()},t.getInstance=function(){var e=P(I.GuideMgr);if(null==e)return null;var n=e.getComponentInChildren(t);if(null==n){var i=s(hyz.guidePrefab);i.parent=e,(n=i.getComponent(t)).getComponent(c).updateAlignment(),n.hollowOut.getComponent(c).updateAlignment(),n.touchBlocker.getComponent(c).updateAlignment(),n.node.active=!1,n.hollowOut.node.active=!1,n.touchBlocker.node.active=!1}return n},o.loadPrefab=function(e,t){return new Promise(l(u().mark((function n(i,r){var l;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=(l=d.getBundle(e))){n.next=5;break}return n.next=4,new Promise((function(t,n){d.loadBundle(e,{},(function(e,i){e?n():t(i)}))}));case 4:l=n.sent;case 5:l.load(t,(function(e,n){e?(p("加载asset失败, url:"+t+", err: "+e),i(null)):i(n)}));case 6:case"end":return n.stop()}}),n)}))))},o.playGuideList=function(e,n){var i=this;if(!e||0==e.length)return!1;if(hyz.guide_manager.checkHasGuideFinished(e[0].guideId))return!1;var r,o={},a=function(){var e=l(u().mark((function e(n,r){var l,o,a,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(l=(null!=n?n:"")+":"+r,!(o=i._tipUIs[l])||!v(o)){e.next=7;break}return o.node.active=!1,e.abrupt("return",o);case 7:return e.next=9,i.loadPrefab(n,r);case 9:if(null!=(a=e.sent)){e.next=13;break}return p("引导提示UI的prefab不存在"),e.abrupt("return");case 13:return(c=s(a)).parent=t.getInstance().node,i._tipUIs[l]=o=c.getComponent(m),null==o&&p("引导提示UI必须继承自 guide_tip_base"),o.node.active=!1,e.abrupt("return",o);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c=null;return(r=function(){var t=l(u().mark((function t(s){var p,d;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(p=e[s])){t.next=3;break}return t.abrupt("return");case 3:d=function(t){var d;if(null!=(d=p.tipPrefab)&&d.prefabPath){var h,f,g,w=(null!=(h=null==(f=p.tipPrefab)?void 0:f.bundleName)?h:"")+":"+(null==(g=p.tipPrefab)?void 0:g.prefabPath);t?o[w]=t:v(o[w])&&(t=o[w])}var k,m,P=null;p.targetPath&&(null==(P=b(p.targetPath,t))&&(P=b(p.targetPath)),_(null!=P,"高亮节点路径不对"+p.targetPath)),(c=S.createWithHighLightNode(P,p)).setShowEvent({onBeforeAppear:function(){return!(null==n||!n.onStepBeforeAppear)&&n.onStepBeforeAppear(p)},onWillAppear:(m=l(u().mark((function e(){var i,r,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(null==(i=p.tipPrefab)?void 0:i.bundleName,null==(r=p.tipPrefab)?void 0:r.prefabPath);case 2:(l=e.sent)&&(t&&!v(t)&&(t=null),P&&!v(P)&&(P=null),l.initGuideTip(p,P,t),l.node.active=!0,C(p.guideId,p.id,"onWillAppear,显示tipUI",p.tipPrefab,p.tipParams)),l&&l.onStepWillAppear(p),null!=n&&n.onStepWillAppear&&n.onStepWillAppear(p,l);case 6:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)}),onWillFinish:function(){var t,l,u;(a(null==(t=p.tipPrefab)?void 0:t.bundleName,null==(l=p.tipPrefab)?void 0:l.prefabPath).then((function(t){var n,i,r,l,u,o,a;t&&((null==(n=e[s+1])||null==(i=n.tipPrefab)?void 0:i.prefabPath)==(null==(r=p.tipPrefab)?void 0:r.prefabPath)&&(null==(l=e[s+1])||null==(u=l.tipPrefab)?void 0:u.bundleName)==(null==(o=p.tipPrefab)?void 0:o.bundleName)&&(null==(a=e[s+1])?void 0:a.tipParams)||t.hide());t&&t.onStepWillFinish(p)})),r(s+1),C(p.guideId,p.id,"onWillfinish,4"),i.checkGoNextStep(),null!=n&&n.onStepWillFinish)&&n.onStepWillFinish(p,i._tipUIs[null==(u=p.tipPrefab)?void 0:u.prefabPath]);null==e[s+1]&&(C(p.guideId,"onGuideFinish"),null!=n&&n.onGuideFinish&&n.onGuideFinish(p.guideId))},onAfterHide:(k=l(u().mark((function e(){var t,r,l,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(null==(t=p.tipPrefab)?void 0:t.bundleName,null==(r=p.tipPrefab)?void 0:r.prefabPath);case 2:(l=e.sent)&&l.onStepAfterHide(p),null!=n&&n.onStepAfterHide&&n.onStepAfterHide(p,i._tipUIs[null==(o=p.tipPrefab)?void 0:o.prefabPath]);case 5:case"end":return e.stop()}}),e)}))),function(){return k.apply(this,arguments)})}),i.addStep(c),C(p.guideId,p.id,"handler,addStep,","id:"+p.id+",desc:"+p.desc)},p.waitForEvent?(C(p.guideId,p.id,"func,1,等待事件",p.waitForEvent),i.node.once(p.waitForEvent,(function(e){C(p.guideId,p.id,"func,2,已触发等待事件",p.waitForEvent),e instanceof g?(d(e.node),i.checkGoNextStep()):(d(e),i.checkGoNextStep())}),i)):(C(p.guideId,p.id,"func,2,直接执行","idx:"+s),d(null),0==s&&i.checkGoNextStep());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())(0),!0},t.emitToSelf=function(e,t){for(var n,i=arguments.length,r=new Array(i>2?i-2:0),l=2;l<i;l++)r[l-2]=arguments[l];(n=this.getInstance().node).emit.apply(n,[e,t].concat(r))},t.markGuideFinish=function(e){var t;(U=null!=(t=U)?t:{})[e]=!0,h.localStorage.setItem("_guideFinishTags",JSON.stringify(U)),f("GUIDE _guideFinishTags,mark:",JSON.stringify(U))},t.checkHasGuideFinished=function(e){return function(){if(null==U){var e=h.localStorage.getItem("_guideFinishTags");f("GUIDE _guideFinishTags",e);try{U=JSON.parse(e)}catch(e){U={}}null==U&&(U={})}}(),1==U[e]},t.playGuideList=function(e,t){return this.getInstance().playGuideList(e,t)},t.closeCurStep=function(){this.getInstance().closeCurStep()},t.blockAllTouch=function(){this.getInstance().touchBlocker.node.active=!0,this.getInstance().touchBlocker.blockAll()},t.fillHollowout=function(){this.getInstance().hollowOut.fillHollowout()},t}(g)).event_guide_emit="event_guide_emit",N=t((F=W).prototype,"hollowOut",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(F.prototype,"touchBlocker",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=F))||G));function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];f.apply(void 0,["GUIDE_LOG",e].concat(n))}o._RF.pop()}}}));

System.register("chunks:///_virtual/guide_step.ts",["./rollupPluginModLoBabelHelpers.js","cc","./function.ts"],(function(e){var t,i,r,n,o,h,c,l,u,s;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,r=e.v2,n=e.size,o=e.Vec2,h=e.UITransform,c=e.v3,l=e.isValid,u=e.assert},function(e){s=e._funcs}],execute:function(){i._RF.push({},"59ab1fUpT9DM4FeWY3Tkqhh","guide_step",void 0);var a=e("HollowShape",function(e){return e[e.None=0]="None",e[e.Circle=1]="Circle",e[e.Rect=2]="Rect",e[e.Hex=3]="Hex",e}({})),d=e("ClickCloseType",function(e){return e[e.close_by_click_bg=0]="close_by_click_bg",e[e.close_by_click_highlight=1]="close_by_click_highlight",e[e.no_close=2]="no_close",e}({}));e("guide_step",function(){function e(e,t){void 0===t&&(t=0),this.guideId=0,this.tag=0,this.clickType=d.close_by_click_bg,this._showEvent=void 0,this._holeShape=void 0,this._center=void 0,this._radius=void 0,this._rectSize=n(0,0),this.round=0,this.opacity=200,this._vertexArr=[],this.clickType=null!=e?e:d.close_by_click_bg,this.tag=t}e.createWithClickGuide=function(t,i){var r,n,o;void 0===i&&(i=0);var h=new e(d.close_by_click_highlight,i);return h._holeShape=null!=(r=t.holeShape)?r:a.Rect,h._center=t.center,h._radius=t.radius,t.rectSize&&(h._rectSize=t.rectSize.clone()),h.round=null!=(n=t.round)?n:0,h.opacity=null!=(o=t.opacity)?o:200,h._updateVertex(),h},e.createWithBtnNode=function(t,i){void 0===i&&(i=0);var n=t.getWorldPosition();n=hyz.guide_manager.getInstance().node.getComponent(h).convertToNodeSpaceAR(n);var o=t.getComponent(h).contentSize.clone(),l=c(1,1,1);return t.getWorldScale(l),o.width*=l.x,o.height*=l.y,e.createWithClickGuide({holeShape:hyz.HollowShape.Rect,center:r(n.x,n.y),radius:.5*o.width*1.414,rectSize:o,round:10},i)},e.createWithoutClick=function(t,i){var n;return void 0===t&&(t=null),void 0===i&&(i=0),l(t)?n=e.createWithBtnNode(t,i):((n=new e(d.close_by_click_bg,i))._center=r(0,0),n._radius=0,n.round=0,n.opacity=200,n._holeShape=a.None),n},e.createWithHighLightNode=function(t,i){var n,o,s,d;void 0===t&&(t=null);var _=a.Rect,p=r(0,0),g=0,v=null!=(n=null==(o=i.hollowoutParam)?void 0:o.round)?n:10,S=null!=(s=null==(d=i.hollowoutParam)?void 0:d.opacity)?s:200,f=null;if(t&&l(t)){var y,x=t.getWorldPosition(),z=hyz.guide_manager.getInstance().node.getComponent(h);x=z.convertToNodeSpaceAR(x),z=t.getComponent(h),u(null!=z,"高亮节点一定要有UItransform组件");var k=z.contentSize.clone(),w=c(1,1,1);t.getWorldScale(w),k.width*=w.x,k.height*=w.y,p=r(x.x,x.y),g=.5*k.width*1.414,f=k;var b=null==i||null==(y=i.hollowoutParam)?void 0:y.margin;null!=b&&b.left&&(f.width+=null==b?void 0:b.left,p.x-=.5*(null==b?void 0:b.left)),null!=b&&b.right&&(f.width+=null==b?void 0:b.right,p.x+=.5*(null==b?void 0:b.right)),null!=b&&b.top&&(f.height+=null==b?void 0:b.top,p.y+=.5*(null==b?void 0:b.top)),null!=b&&b.bottom&&(f.height+=null==b?void 0:b.bottom,p.y-=.5*(null==b?void 0:b.bottom))}else _=a.None;var m=new e(i.clickType,i.id);return m.guideId=i.guideId,m._holeShape=_,m._center=p,m._radius=g,f&&(m._rectSize=f.clone()),m.round=v,m.opacity=S,m._updateVertex(),m};var i=e.prototype;return i.setShowEvent=function(e){return this._showEvent=e,this},i.checkHasClick=function(){return this.holeShape!=a.None},i._updateVertex=function(){this._vertexArr=[];var e=4;this.holeShape==a.Hex&&(e=6);var t=360/e,i=this.radius,o=0;e%2==0&&(o=-t/2);for(var h=[o],c=1;c<e;c++)o+=t,h.push(o);for(var l=0;l<h.length;l++)o=h[l],this._vertexArr[l]=r(i*Math.sin(o/180*3.14)+this.center.x,i*Math.cos(o/180*3.14)+this.center.y);if(this.holeShape==a.Rect&&!this.rectSize.equals(n(0,0))){this._vertexArr=[];for(var u=[r(-.5,.5),r(.5,.5),r(.5,-.5),r(-.5,-.5)],s=0;s<4;s++)this._vertexArr[s]=r(this.rectSize.width*u[s].x+this.center.x,this.rectSize.height*u[s].y+this.center.y)}},i.getVerterArr=function(){return this._vertexArr},i.checkContain=function(e){if(this.holeShape==a.Circle)return o.distance(e,this.center)<this.radius;if(this.holeShape==a.Rect||this.holeShape==a.Hex){var t=this.getVerterArr();return-1==s.checkPolygonContainPoint(e,t)}return!1},i.equals=function(e){if(this.holeShape!=e.holeShape)return!1;if(Math.abs(this.center.x-e.center.x)>.001||Math.abs(this.center.y-e.center.y)>.001)return!1;if(this.holeShape==a.Rect){if(null==this.rectSize&&null!=e.rectSize||null!=this.rectSize&&null==e.rectSize)return!1;if(null!=this.rectSize&&(Math.abs(this.rectSize.width-e.rectSize.width)>.001||Math.abs(this.rectSize.height-e.rectSize.height)>.001))return!1}return this.opacity==e.opacity&&this.round==e.round},t(e,[{key:"showEvent",get:function(){return this._showEvent}},{key:"holeShape",get:function(){return this._holeShape},set:function(e){this._holeShape!=e&&(this._updateVertex(),this._holeShape=e)}},{key:"center",get:function(){return this._center},set:function(e){this._center!=e&&(this._updateVertex(),this._center=e)}},{key:"radius",get:function(){return this._radius},set:function(e){this._radius!=e&&(this._updateVertex(),this._radius=e)}},{key:"rectSize",get:function(){return this._rectSize},set:function(e){this._rectSize.equals(e)||(this._updateVertex(),this._rectSize.set(e))}},{key:"hollowParam",get:function(){return this}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/guide_tip_base.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,n;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy,n=i.Component}],execute:function(){e._RF.push({},"65831uuj1tIPrcWF/ZE7mSe","guide_tip_base",void 0);i("guide_tip_base",function(i){function e(){return i.apply(this,arguments)||this}t(e,i);var n=e.prototype;return n.initGuideTip=function(i,t,e){throw new Error("子类必须实现initGuideTip方法")},n.onStepWillAppear=function(i){},n.onStepWillFinish=function(i){},n.onStepAfterHide=function(i){},n.hide=function(){this.node.active=!1},e}(n));e._RF.pop()}}}));

System.register("chunks:///_virtual/hyz_export.ts",["cc","./guide_manager.ts","./guide_tip_base.ts","./guide_step.ts","./guide_config.ts","./function.ts"],(function(e){var t,i,a,n;return{setters:[function(e){t=e.cclegacy,i=e.ImageAsset,a=e.Texture2D,n=e.SpriteFrame},function(t){e("guide_manager",t.guide_manager)},function(t){e("guide_tip_base",t.guide_tip_base)},function(t){var i={};i.ClickCloseType=t.ClickCloseType,i.HollowShape=t.HollowShape,i.guide_step=t.guide_step,e(i)},function(t){e("guide_config",t.guide_config)},function(t){e("_funcs",t._funcs)}],execute:function(){t._RF.push({},"79985YFOYhDyp/6env21LMh","hyz_export",void 0);var u={picData:new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]),width:2,height:2},r=new i;r.reset({_data:u.picData,width:u.width,height:u.height,format:a.PixelFormat.RGBA8888,_compressed:!1});var s=new a;s.image=r;var c=new n;c.texture=s,c.packable=!1,c.ensureMeshData();e("whiteDot_texture",s),e("whiteDot_spriteFrame",c);t._RF.pop()}}}));

System.register("chunks:///_virtual/hyz_init.ts",["cc","./hyz_export.ts"],(function(){var e,t,i,n,o,r,c,f;return{setters:[function(f){e=f.cclegacy,t=f.director,i=f.Director,n=f.assetManager,o=f.error,r=f.EffectAsset,c=f.Prefab},function(e){f=e}],execute:function(){e._RF.push({},"da51biL59lLHordMrOiZ0QY","hyz_init",void 0),window.hyz=f;var u=f;t.once(i.EVENT_AFTER_SCENE_LAUNCH,(function(){n.loadBundle("libs",{},(function(e,t){e?o("libs bundle不存在"):(t.load("hyz/guide/effect/hollow",r,(function(e,t){e?o("hyz/guide/effect/hollow.effect not exist"):u.hollowEffect=t})),t.load("hyz/guide/pfb_guide_manager",c,(function(e,t){e?o("hyz/guide/pfb_guide_manager.prefab not exist"):u.guidePrefab=t})))}))})),e._RF.pop()}}}));

System.register("chunks:///_virtual/libs",["./EditorAssets.ts","./guide_config.ts","./guide_hollow.ts","./guide_manager.ts","./guide_step.ts","./guide_tip_base.ts","./touch_blocker.ts","./hyz_export.ts","./hyz_init.ts","./function.ts","./persist_nodes.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/persist_nodes.ts",["cc"],(function(e){var i,o,n,t,r,d,s,a,l;return{setters:[function(e){i=e.cclegacy,o=e.v2,n=e.Node,t=e.Layers,r=e.Canvas,d=e.director,s=e.view,a=e.UITransform,l=e.Widget}],execute:function(){var g;e("getPersistNode",(function(e,i,l){void 0===i&&(i=o(0,0));void 0===l&&(l=null);if(null==p){(p=new n("_globalNode")).setSiblingIndex(100),p.layer=t.Enum.UI_2D,p.addComponent(r).alignCanvasWithScreen=!0,v(p),d.addPersistRootNode(p)}var g=s.getVisibleSize();p.setPosition(g.width/2,g.height/2);var u=p.getChildByName(e);if(!u){u=new n(e);var h=c[e]||0;p.addChild(u),u.setSiblingIndex(h)}i&&u.setPosition(i.x,i.y);if(l){var f=u.getComponent(a);null==f&&(f=u.addComponent(a)),f.contentSize=l}else v(u);return u})),i._RF.push({},"bd0c8Z0RhdDU4EDNcpPWC8+","persist_nodes",void 0);var u=e("PersistNodeNames",function(e){return e.PopuMgr="PopuMgr",e.GuideMgr="GuideMgr",e.ToastMgr="ToastMgr",e.LoadingTip="LoadingTip",e.SoundMgr="SoundMgr",e.GlobalScheduler="GlobalScheduler",e.GlobalAni="GlobalAni",e.AudioNode="AudioNode",e}({})),c=((g={})[u.PopuMgr]=1,g[u.GuideMgr]=2,g[u.ToastMgr]=4,g[u.LoadingTip]=5,g),p=null;function v(e){var i=e.getComponent(l)||e.addComponent(l);i.isAlignLeft=!0,i.isAlignRight=!0,i.isAlignTop=!0,i.isAlignBottom=!0,i.left=0,i.right=0,i.top=0,i.bottom=0}i._RF.pop()}}}));

System.register("chunks:///_virtual/touch_blocker.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,n,r,s,c,p,l,a,u,h,S,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Sprite,p=t.director,l=t.Director,a=t.NodeEventType,u=t.UITransform,h=t.v3,S=t.size,d=t.Component}],execute:function(){var g,_,f,v;r._RF.push({},"71437kWdHVCmLmmcgwncIi7","touch_blocker",void 0);var y=s.ccclass,T=s.property,m=(t("default",(g=T(c),y((v=e((f=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))||this).isBlockAll=!1,e.isPassAll=!1,o(e,"debugSpr",v,n(e)),e._curStep=null,e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.registerEvent()},r.start=function(){},r.onDestroy=function(){this.unregisterEvent()},r.registerEvent=function(){this.node.on(a.TOUCH_START,this.onTouchEvent,this),this.node.on(a.TOUCH_MOVE,this.onTouchEvent,this),this.node.on(a.TOUCH_END,this.onTouchEvent,this)},r.unregisterEvent=function(){this.node.targetOff(this)},r.onTouchEvent=function(t){if(this.isPassAll)t.preventSwallow=!0;else{if(this.isBlockAll||!this._curStep)return t.preventSwallow=!1,t.propagationImmediateStopped=!0,void(t.propagationStopped=!0);if(this._curStep.clickType==hyz.ClickCloseType.close_by_click_bg)return t.preventSwallow=!1,t.propagationImmediateStopped=!0,t.propagationStopped=!0,void(t.type==a.TOUCH_START&&hyz.guide_manager.closeCurStep());if(m)return t.preventSwallow=!1,t.propagationImmediateStopped=!0,void(t.propagationStopped=!0);var e=t.getUILocation();e=t.target.getComponent(u).convertToNodeSpaceAR(h(e.x,e.y,0)),this._curStep.checkContain(e)?(t.preventSwallow=!0,this._curStep.clickType==hyz.ClickCloseType.close_by_click_highlight&&t.type==a.TOUCH_END&&hyz.guide_manager.closeCurStep()):(t.preventSwallow=!1,t.propagationImmediateStopped=!0,t.propagationStopped=!0)}},r.blockAll=function(){this.isBlockAll=!0,this.isPassAll=!1},r.passAll=function(){this.isPassAll=!0,this.isBlockAll=!1},r.setStep=function(t){this._curStep=t,this.isBlockAll=!1,this.isPassAll=!1,this.debugSpr&&(this._curStep.rectSize.equals(S(0,0))||this.debugSpr.getComponent(u).setContentSize(this._curStep.rectSize),this.debugSpr.node.position=h(this._curStep.center.x,this._curStep.center.y,0))},e}(d)).prototype,"debugSpr",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=f))||_)),!0),C=0;p.on(l.EVENT_AFTER_SCENE_LAUNCH,(function(){m=!0,clearTimeout(C),C=setTimeout((function(){m=!1}),1e3)})),r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/libs', 'chunks:///_virtual/libs'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});