System.register("chunks:///_virtual/audio_util.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global_node.ts"],(function(t){var n,r,e,o,i,a,u,s,c,l,p;return{setters:[function(t){n=t.createClass,r=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){o=t.cclegacy,i=t._decorator,a=t.resources,u=t.AudioClip,s=t.isValid,c=t.AudioSource},function(t){l=t.getGlobalNode,p=t.GlobalNodeNames}],execute:function(){o._RF.push({},"b8e8ayQCTlGYLbyxNiqtiZH","audio_util",void 0);i.ccclass,i.property;var f=t("AudioEnum",function(t){return t.button="audio/Button_Click",t.finishOne="audio/ContainerFinish",t.pourWater="audio/pourWater",t.youWin="audio/Show_Victory",t}({}));t("AudioUtil",function(){function t(){}return t.preloadAll=function(){var t=[];for(var n in f){var r=f[n];t.push(r)}a.preload(t)},t.unloadAll=function(){for(var t in f){var n=f[t];a.release(n,u)}},t.playEffect=function(){var t=r(e().mark((function t(n,r){var o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=1),t.next=3,this.loadClip(n);case 3:o=t.sent,this.as.clip=o,this.as.loop=!1,this.as.volume=r,this.as.play();case 8:case"end":return t.stop()}}),t,this)})));return function(n,r){return t.apply(this,arguments)}}(),t.playPourWaterEffect=function(){var t=r(e().mark((function t(n){var r,o=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadClip(f.pourWater);case 2:r=t.sent,this.as.clip=r,this.as.loop=!1,this.as.volume=1,this.as.play(),setTimeout((function(){o.as.stop()}),1e3*(3*n));case 9:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),t.loadClip=function(){var t=r(e().mark((function t(n){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){a.load(n,u,(function(n,r){t(n?null:r)}))})));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),n(t,null,[{key:"as",get:function(){if(s(this._as))return this._as;var t=l(p.SoundMgr),n=t.getComponent(c);return n||(n=t.addComponent(c)),n}}]),t}())._as=null,o._RF.pop()}}}));

System.register("chunks:///_virtual/base_dialog.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i,e,o,s,r,a,l,c,u,h,f,d,p,m,g,y,w,b;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass,r=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){l=t.cclegacy,c=t._decorator,u=t.Enum,h=t.Vec2,f=t.UITransform,d=t.Vec3,p=t.tween,m=t.UIOpacity,g=t.v3,y=t.Tween,w=t.Component,b=t.v2}],execute:function(){var _,v,P,A,C,O,S,B,I,k,D,E,H,T;l._RF.push({},"df4e8ZbYhNNj4gLSEiD+Yl9","base_dialog",void 0);var z=10087,R=t("WindowStyle",function(t){return t[t.POPUP=0]="POPUP",t[t.NORMAL=1]="NORMAL",t}({})),U=c.ccclass,L=c.property;t("BaseDialog",(_=L({type:u(R),tooltip:"弹窗样式,POPUP有弹窗动画，NORMAL直接显示"}),v=L({tooltip:"是否点击背后隐藏"}),P=L({tooltip:"是否点击返回键隐藏"}),A=L(h),C=L({tooltip:"黑色半透明遮罩的透明度"}),O=L({tooltip:"是否全屏"}),U((I=n((B=function(t){function n(){for(var n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=t.call.apply(t,[this].concat(s))||this).m_manager=null,n.m_isInAnim=!1,n._tag="",n.isPfbRaw=!1,e(n,"style",I,o(n)),e(n,"closeByTouchBg",k,o(n)),e(n,"closeByTouchBack",D,o(n)),e(n,"offset",E,o(n)),e(n,"maskOpacity",H,o(n)),e(n,"isFullScreen",T,o(n)),n._onClosed=null,n}i(n,t),n.create=function(){var t=r(a().mark((function t(n,i){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}}),t)})));return function(n,i){return t.apply(this,arguments)}}();var l=n.prototype;return l.onLoad=function(){this.isFullScreen?(this.node.getComponent(f).width=display.width,this.node.getComponent(f).height=display.height):this.node.position=new d(this.offset.x,this.offset.y)},l.onDestroy=function(){this.exitView()},l.onPreDestroy=function(){},l.getShowAnim=function(){return null},l.getHideAnim=function(){return null},l.getDftShowAni=function(t){var n=this;return void 0===t&&(t=.3),p(this.node).call((function(){var i=n.node.getComponent(m)||n.node.addComponent(m);p(i).set({opacity:0}).to(t,{opacity:255},{easing:"backOut"})})).set({scale:g(.5,.5,.5)}).to(t,{scale:g(1,1,1)},{easing:"backOut"})},l.getDftHideAni=function(t){var n=this;return void 0===t&&(t=.3),p(this.node).call((function(){var i=n.node.getComponent(m)||n.node.addComponent(m);p(i).to(t,{opacity:0},{easing:"backIn"})})).to(t,{scale:g(.5,.5,.5)},{easing:"backIn"})},l.initWindow=function(t,n,i,e){this.m_manager=t,this.m_isInAnim=!1,this._tag=n,this.isPfbRaw=i,e()},l.refreshView=function(t,n,i,e){},l.showWindow=function(t,n,i,e){var o=this;if(this.initView(t,n,i,e),!this.m_isInAnim&&this.node.active){this.node.setScale(g(1,1,1)),y.stopAllByTag(z,this.node);var s=this.getShowAnim();null==s&&this.style==R.POPUP&&(s=this.getDftShowAni()),s?(s.tag(z),s.call((function(){o.onShowEnd()})).start()):this.onShowEnd()}},l.onShowEnd=function(){this.m_isInAnim=!1},l.dismiss=function(t,n){var i=this;if(void 0===t&&(t=!1),t)this.onHideEnd(n);else if(!this.m_isInAnim){this.node.setScale(g(1,1,1)),y.stopAllByTag(z,this.node);var e=this.getHideAnim();null==e&&this.style==R.POPUP&&(e=this.getDftHideAni()),e?(e.tag(z),this.m_isInAnim=!0,e.call((function(){i.onHideEnd(n)})).start()):this.onHideEnd(n)}},l.setOnClosed=function(t){this._onClosed=t},l.onHideEnd=function(t){this.m_isInAnim=!1,this.node.active=!1,this._onClosed&&(this._onClosed(this),this._onClosed=null),this.m_manager&&this.m_manager.node.active&&this.m_manager.onHideEnd(this)},l.onBtnClose=function(){this.dismiss()},s(n,[{key:"tag",get:function(){return this._tag}},{key:"isPupuAni",get:function(){return this.m_isInAnim}}]),n}(w)).prototype,"style",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.POPUP}}),k=n(B.prototype,"closeByTouchBg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=n(B.prototype,"closeByTouchBack",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=n(B.prototype,"offset",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b(0,0)}}),H=n(B.prototype,"maskOpacity",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 128}}),T=n(B.prototype,"isFullScreen",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=B))||S));l._RF.pop()}}}));

System.register("chunks:///_virtual/click_button_effect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audio_util.ts"],(function(t){var n,e,o,r,c,u,i,a,s;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){r=t.cclegacy,c=t._decorator,u=t.Button,i=t.Component},function(t){a=t.AudioUtil,s=t.AudioEnum}],execute:function(){var l;r._RF.push({},"dae6f3xQNRIjqtJPEQUGoRa","click_button_effect",void 0);var p=c.ccclass,f=(c.property,c.requireComponent),d=c.menu;t("default",p(l=d("audio/button_click")(l=f(u)(l=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var c=r.prototype;return c.onLoad=function(){var t=this.node.getComponent(u),n=new i.EventHandler;n.component="audio_button_click",n.handler="onClick",n.target=this.node,t.clickEvents.push(n)},c.onClick=function(){var t=e(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.playEffect(s.button);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r}(i))||l)||l)||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/const.ts",["cc"],(function(c){var n;return{setters:[function(c){n=c.cclegacy}],execute:function(){n._RF.push({},"84236ludN5MZJqSMzwuxfRo","const",void 0);c("SceneNames",function(c){return c.launch="launch",c.play="play",c}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/cup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audio_util.ts","./water.ts","./waterFlow.ts"],(function(t){var o,n,e,i,r,s,a,h,l,c,u,f,d,p,g,w,v,C,m;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,h=t.Layers,l=t.UITransform,c=t.Color,u=t.tween,f=t.v3,d=t.v2,p=t.Widget,g=t.Component},function(t){w=t.AudioUtil,v=t.AudioEnum},function(t){C=t.default},function(t){m=t.WaterFlow}],execute:function(){var y,I,P,k;r._RF.push({},"c0a6d1qdSlPOLu8dOY8ZreG","cup",void 0);var A=s.ccclass,b=s.property,F=t("WaterColors",["#155DEF","#F2C90F","#BD2656","#F0791F","#454574","#FE2D26","#BCA6E3","#E4584F","#00B38A","#DD2E44","#E5C69A","#65DC8E","#B068F0","#F010BF","#538849"]),x=.8;t("default",(y=b(C),A((k=o((P=function(t){function o(){for(var o,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return o=t.call.apply(t,[this].concat(r))||this,e(o,"water",k,i(o)),o._flow=null,o.onClick=null,o.info=null,o.tween=null,o}n(o,t);var r=o.prototype;return r.getFlow=function(){if(this._flow)return this._flow;var t=new a("water_flow");return t.layer=h.Enum.UI_2D,t.addComponent(l),this._flow=t.addComponent(m),this._flow},r.onBtn_click=function(){this.isPouring()||this.onClick&&this.onClick(this)},r.isPouring=function(){return Math.abs(this.node.angle)>1},r.initWater=function(){for(var t=this.info,o=[],n=3;n>=0;n--){var e=t.colorIds[n];if(0!=e){var i=o[o.length-1];i&&i==e?i.height+=1/4:o.push({height:1/4,colorId:e})}}o.forEach((function(t){var o=F[t.colorId]||"#538849";t.color=(new c).fromHEX(o),t.height*=x})),this.water.initInfos(o)},r.setCupInfo=function(t,o){this.info=t,this.onClick=o,this.initWater(),this.reset()},r.update=function(){this.water.skewAngle!=this.node.angle&&(this.water.skewAngle=this.node.angle)},r.setPourOutCallback=function(t,o){this.water.setPourOutCallback(function(){t&&t(this)}.bind(this),function(){this.tween&&(this.tween.stop(),this.tween=null),o&&o(this)}.bind(this))},r.setPourInCallback=function(t){this.water.setPourInCallback(function(){var o=this.checkIsFinshed();t&&t(this,o),o&&w.playEffect(v.finishOne,.4)}.bind(this))},r.checkIsFinshed=function(){for(var t=!0,o=this.info.colorIds,n=null,e=0,i=0;i<4;i++){if(null==n&&(n=o[i]),n!=o[i]){t=!1;break}0==o[i]&&e++}return 4==e&&(t=!0),t},r.moveToPour=function(t,o,n,e){var i=this;this.setPourOutCallback(n,e);var r=this.water.getPourStartAngle(),s=this.water.getPourEndAngle();this.water.onStartPour(),o&&(r*=-1,s*=-1);this.tween=u(this.node).set({angle:0}).to(.5,{position:f(t.x,t.y),angle:r}).to(.8,{angle:s}).call((function(){i.tween=null})).start();for(var a=this.getTop(),h=this.info.colorIds,l=0;l<4;l++){var c=h[l];if(0!=c){if(a.topColorId!=c)break;h[l]=0}}},r.startAddWater=function(t,o,n){this.setPourInCallback(n);for(var e=0,i=3;i>=0&&(0!=this.info.colorIds[i]||(this.info.colorIds[i]=t,++e!=o));i--);var r=F[t]||"#538849";this.water.addInfo({colorId:t,height:o/4*x,color:(new c).fromHEX(r)}),w.playPourWaterEffect(o/4)},r.addWaterImmediately=function(t,o){for(var n=0,e=3;e>=0&&(0!=this.info.colorIds[e]||(this.info.colorIds[e]=t,++n!=o));e--);this.initWater()},r.removeTopWaterImmediately=function(t){for(var o=0,n=this.getTop(),e=this.info.colorIds,i=0;i<4;i++){var r=e[i];if(0!=r){if(n.topColorId!=r)break;if(e[i]=0,++o>=t)break}}return this.initWater(),n},r.getTop=function(){for(var t=this.info.colorIds,o=0,n=0,e=0,i=0;i<4;i++)if(0!=t[i]){if(0!=n&&n!=t[i])break;n=t[i],e++}else o++;return{emptyNum:o,topColorId:n,topColorNum:e,colorHex:F[n]||"#538849"}},r.reset=function(){this.node.angle=0,this.water.skewAngle=0},r.setPourAnchor=function(t){var o=d(3,2);o.x=t?this.node.getComponent(l).width-o.x:o.x,o.y=this.node.getComponent(l).height-o.y,o.x=o.x/this.node.getComponent(l).width,o.y=o.y/this.node.getComponent(l).height,this.setAnchor(o)},r.setNormalAnchor=function(){this.setAnchor(d(.5,.5))},r.setAnchor=function(t){var o=this.node.getComponent(l),n=o.anchorPoint.clone(),e=this.node.getPosition();o.setAnchorPoint(t);var i,r,s,a,h=d(t.x-n.x,t.y-n.y),c=d(h.x*o.width,h.y*o.height);i=c,r=this.node.angle,s=function(t){for(;t>360;)t-=360;for(;t<-360;)t+=360;return t%360*Math.PI/180}(r),(a=d()).x=i.x*Math.cos(s)-i.y*Math.sin(s),a.y=i.x*Math.sin(s)+i.y*Math.cos(s),c=a,e.x+=c.x,e.y+=c.y,this.node.setPosition(e),this.water.getComponent(p).updateAlignment()},r.getWaterSurfacePosY=function(t){void 0===t&&(t=!1);var o=(4-this.getTop().emptyNum)/4;o<.02?o=.02:t&&(o-=.2),o*=x,o-=.5;var n=f(0,this.water.node.getComponent(l).height*o);return(n=this.water.node.getComponent(l).convertToWorldSpaceAR(n)).y},o}(g)).prototype,"water",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=P))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/cupMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./cup.ts","./env"],(function(e){var t,o,n,i,r,s,l,a,c,u,p,h,d,g,f,v,_,y,C,m,b,S,I,x,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose,s=e.createClass,l=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,p=e.JsonAsset,h=e.Prefab,d=e.sys,g=e.v3,f=e.UITransform,v=e.view,_=e.tween,y=e.log,C=e.Component,m=e.Color,b=e.instantiate,S=e.Node,I=e.Layout},function(e){x=e.default},function(e){A=e.DEV}],execute:function(){var T,N,L,P,R,w,O,k,F;c._RF.push({},"54c97X7RyRNT4chIse4wDQL","cupMgr",void 0);var W=u.ccclass,z=u.property,M=u.executeInEditMode,D="level",E="last_cfg",H="action_history",J=((T={})[1]=[0,1],T[2]=[80,1],T[3]=[50,1],T[4]=[40,.9],T[5]=[30,.8],T[6]=[30,.65],T[7]=[20,.6,60],T[8]=[10,.55,80],T);e("CupMgr",(N=z(p),L=z(h),P=z({tooltip:A}),W(R=M((O=t((w=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"levelCfg",O,i(t)),n(t,"pfb",k,i(t)),t._level=1,t.curCfg=[],n(t,"_debugLevel",F,i(t)),t._cups=[],t.layout_v=null,t.selected=null,t._actions=[],t}o(t,e);var c=t.prototype;return c.onLoad=function(){this._level=function(e){if(null==e)return 0;var t=parseInt(e);Number.isNaN(t)&&(t=0);return t}(d.localStorage.getItem(D)||1);var e=d.localStorage.getItem(E);if(e)try{this.curCfg=JSON.parse(e)}catch(e){this.initCfg()}else this.initCfg();if(e=d.localStorage.getItem(H))try{this._actions=JSON.parse(e)}catch(e){}this.createCups()},c.initCfg=function(){this.curCfg=[];for(var e=this.levelCfg.json[this._level-1],t=0;t<e.length;){var o={colorIds:[e[t],e[t+1]||0,e[t+2]||0,e[t+3]||0]};this.curCfg.push(o),t+=4}},c.createCups=function(){var e=l(a().mark((function e(){var t,o,n,i,s,l,c,u,p,h,d,v,_,y,C,m,A,T,N,L,P,R,w,O,k,F,W,z,M;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=function(e,t,o){var n=new S(o);n.parent=t,n.addComponent(f);var i=n.addComponent(I);return i.type=e,i.resizeMode=I.ResizeMode.CONTAINER,i},this.layout_v&&this.layout_v.node.destroyAllChildren(),this._cups=[],this.selected=null,this._actions=[],t=this.curCfg,0!=(o=this.curCfg.length)){e.next=9;break}return e.abrupt("return");case 9:for(n=0;n<o;n++)i=t[n],(s=b(this.pfb)).parent=this.node,(l=s.getComponent(x)).setCupInfo(i,this.onClickCup.bind(this)),this._cups.push(l);if(null==this.layout_v&&(this.layout_v=c(I.Type.VERTICAL,this.node,"layout_v"),this.layout_v.node.setSiblingIndex(1)),u=this._cups[0].node.getComponent(f).contentSize,p=[],o<=4){for(h=[],d=0;d<this._cups.length;d++)h.push(d);p.push(h)}else if(o<=15){for(v=[],_=0,y=o/2;_<y;_++)v.push(_);for(p.push(v),v=[];_<o;_++)v.push(_);p.push(v),v=[]}for(C=[],m=1,A=0;A<p.length;A++){for((T=c(I.Type.HORIZONTAL,this.layout_v.node,"layout_h_"+A)).node.getComponent(f).height=u.height,N=p[A],L=0;L<N.length;L++)P=N[L],this._cups[P].node.parent=T.node;m=Math.max(m,T.node.children.length),(R=J[m][0])!=T.spacingX&&(T.spacingX=R),C.push(T)}for(this.layout_v.enabled=!0,w=J[m][1],this.layout_v.node.scale=g(w,w,w),this.layout_v.spacingY=J[m][2]||40,O=0,k=C;O<k.length;O++)(F=k[O]).updateLayout(),F.enabled=!1;for(this.layout_v.updateLayout(),this.layout_v.enabled=!1,W=r(this._cups);!(z=W()).done;)(M=z.value).orignPt=M.node.position.clone();case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.onClickCup=function(e){this.selected?this.selected==e?(this.doSelect(e,!1),this.selected=null):this.checkPour(this.selected,e)?this.startPour(this.selected,e):(this.doSelect(this.selected,!1),this.selected=null):(this.selected=e,this.doSelect(e,!0))},c.checkPour=function(e,t){var o=e.getTop(),n=t.getTop();return 0!=o.topColorId&&(0==n.topColorId||o.topColorNum<=n.emptyNum)},c.startPour=function(e,t){var o=this;t.node.setSiblingIndex(0),t.node.parent.setSiblingIndex(0),e.node.setSiblingIndex(10),e.node.parent.setSiblingIndex(10);var n=e.getTop(),i=g(t.node.position),r=t.node.parent.getComponent(f).convertToWorldSpaceAR(i),s=v.getVisibleSize(),l=r.x>.5*s.width;Math.abs(r.x-.5*s.width)<2&&(l=e.node.parent.getComponent(f).convertToWorldSpaceAR(g(e.node.position)).x<.5*s.width);i.y+=60+.5*t.node.getComponent(f).height;i.x=i.x+(l?-0:0),i=t.node.parent.getComponent(f).convertToWorldSpaceAR(i),e.setPourAnchor(l),i=e.node.parent.getComponent(f).convertToNodeSpaceAR(i);var a=e.getFlow();a.node.parent=this.node,a.setLineScale(this.layout_v.node.scale.x);this.selected=null,e.moveToPour(i,l,function(){var i=e.node.getComponent(f).convertToWorldSpaceAR(g());i=a.node.parent.getComponent(f).convertToNodeSpaceAR(i);var r=g(i.x,t.getWaterSurfacePosY());(r=a.node.parent.getComponent(f).convertToNodeSpaceAR(r)).x=i.x,a.strokeColor=(new m).fromHEX(n.colorHex),a.playFlowAni(i,r,.2,!1,(function(){t.startAddWater(n.topColorId,n.topColorNum,(function(i,r){o.onPourOneFinished(e,t,n.topColorId,n.topColorNum)}))}))}.bind(this),function(){var o=e.node.getComponent(f).convertToWorldSpaceAR(g());o=a.node.parent.getComponent(f).convertToNodeSpaceAR(o);var n=g(o.x,t.getWaterSurfacePosY(!0));(n=a.node.parent.getComponent(f).convertToNodeSpaceAR(n)).x=o.x,a.playFlowAni(o,n,.2,!0,(function(){a.clear()})),e.setNormalAnchor();var i=e.orignPt;_(e.node).delay(.7).to(.5,{position:i,angle:0},{easing:"sineOut"}).call((function(){e.node.setSiblingIndex(0),e.node.parent.setSiblingIndex(0)})).start()}.bind(this))},c.doSelect=function(e,t){var o=e.orignPt,n=o.y+(t?.2*e.node.getComponent(f).height:0);_(e.node).stop(),_(e.node).to(.2,{position:g(o.x,n)}).start()},c.onPourOneFinished=function(e,t,o,n){var i=this._cups.indexOf(e),r=this._cups.indexOf(t);5==this._actions.length&&this._actions.shift(),this._actions.push({from:i,to:r,colorId:o,num:n}),this.checkIsAllFinished()?(y("---------完成了"),this._level++,d.localStorage.setItem(D,this._level+""),this.node.emit("level_finish")):this.node.emit("do_pour"),d.localStorage.setItem(E,JSON.stringify(this.curCfg)),d.localStorage.setItem(H,JSON.stringify(this._actions))},c.getActionNum=function(){return this._actions.length},c.undoAction=function(){var e=this._actions.pop();if(null==e)return!1;var t=e.from,o=e.to,n=e.num,i=e.colorId,r=this._cups[o],s=this._cups[t];return!r.isPouring()&&!s.isPouring()&&(r.removeTopWaterImmediately(n),s.addWaterImmediately(i,n),!0)},c.nextLevel=function(){this.initCfg(),this.createCups()},c.getLevel=function(){return this._level},c.checkIsAllFinished=function(){for(var e,t=r(this._cups);!(e=t()).done;){if(!e.value.checkIsFinshed())return!1}return!0},s(t,[{key:"debugLevel",get:function(){return this._debugLevel},set:function(e){this._debugLevel=e,this._level=e,this.nextLevel()}}]),t}(C)).prototype,"levelCfg",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(w.prototype,"pfb",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(w.prototype,"_debugLevel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(w.prototype,"debugLevel",[P],Object.getOwnPropertyDescriptor(w.prototype,"debugLevel"),w.prototype),R=w))||R)||R));c._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/dialog_mgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global_node.ts","./layer_color.ts","./base_dialog.ts"],(function(e){var t,n,i,o,s,r,a,p,u,l,c,h,d,g,f,m,v,_,y,T,P,B,b,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.createForOfIteratorHelperLoose,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){p=e.cclegacy,u=e._decorator,l=e.color,c=e.isValid,h=e.instantiate,d=e.log,g=e.Node,f=e.director,m=e.Component,v=e.Widget,_=e.resources,y=e.Prefab},function(e){T=e.getGlobalNode,P=e.GlobalNodeNames},function(e){B=e.LayerColor},function(e){b=e.BaseDialog,k=e.WindowStyle}],execute:function(){var w,O,S;p._RF.push({},"5345fKpv/pB47ruzjWMeK8z","dialog_mgr",void 0);u.ccclass;var A=u.property;var I=e("PopupMgr",((S=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,i(t,"m_popups",O,o(t)),t.maskBg=null,t._isMaskOn=!1,t}n(t,e),t.getInstance=function(){var e,n,i=T(P.PopuMgr),o=i.getComponent(t);return null==o&&(null==(n=(e=i).getComponent(v))&&(n=e.addComponent(v)),n.bottom=0,n.top=0,n.left=0,n.right=0,n.isAlignBottom=!0,n.isAlignTop=!0,n.isAlignLeft=!0,n.isAlignRight=!0,n.updateAlignment(),(o=i.addComponent(t)).createMaskNode()),o};var p=t.prototype;return p.onLoad=function(){},p.onDestroy=function(){},p.createMaskNode=function(){return this.maskBg=new B(l(0,0,0)),this.maskBg.opacity=0,this.node.addChild(this.maskBg),this.maskBg},p.showWindow=function(){var e=r(a().mark((function e(n,i){var o,s,r,p=this,u=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=u.length,s=new Array(o>2?o-2:0),r=2;r<o;r++)s[r-2]=u[r];return e.abrupt("return",new Promise((function(e,o){var r;if(null!=n)if(n instanceof y&&(r=n),null!=r){var a=p.createWindowByPrefab.apply(p,[r,r.name,!1,i].concat(s));e(a)}else{var u=n;if(!u)return void o();var l=t.getInstance().getWindowByTag(u);if(l){l.refreshView.apply(l,[i].concat(s));var c=l.node.getSiblingIndex()+1;return l.node.setSiblingIndex(c),void e(l)}var h=u;(r=_.get(h,y))?setTimeout((function(){var t=p.createWindowByPrefab.apply(p,[r,u,!0,i].concat(s));e(t)})):_.load(h,y,(function(t,n){if(t)o();else{d("---------------load prefab success",u);var r=p.createWindowByPrefab.apply(p,[n,u,!0,i].concat(s));e(r)}}))}else o()})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p.createWindowByPrefab=function(e,n,i,o){for(var s=this,r=arguments.length,a=new Array(r>4?r-4:0),p=4;p<r;p++)a[p-4]=arguments[p];if(!c(this))return null;var u=t.getInstance().getWindowByTag(n);if(u)return u.refreshView.apply(u,[o].concat(a)),null;var l=h(e);if(null==l)return d("弹窗预制文件不存在"),null;l.setPosition(0,0);var g=l.getComponent(b);return g?(g.initWindow(this,n,i,(function(){s.realShow.apply(s,[g,o].concat(a))})),g):(d("--------error prefab弹窗异常",n),null)},p.realShow=function(e,n){if(this.maskBg.off(g.EventType.TOUCH_START,this.onBgTouch,this),this.maskBg.on(g.EventType.TOUCH_START,this.onBgTouch,this),e.maskOpacity){var i=e.style==k.POPUP?.2:0;f.isPaused()?this.maskBg.opacity=e.maskOpacity:this.maskBg.fadeTo(i,e.maskOpacity,0)}this._isMaskOn=!0;var o=0;0==this.m_popups.length?this.node.emit(t.EVT_POPO_OPEN_FRIST):o=this.m_popups[this.m_popups.length-1].node.getSiblingIndex(),this.maskBg.setSiblingIndex(o),this.maskBg.setSiblingIndex(o+1),e.node.setSiblingIndex(o+1),this.node.addChild(e.node);for(var s=arguments.length,r=new Array(s>2?s-2:0),a=2;a<s;a++)r[a-2]=arguments[a];e.showWindow.apply(e,[n].concat(r)),this.m_popups.push(e)},p.onBgTouch=function(e){for(var t=this.m_popups.length-1;t>=0;t--){var n=this.m_popups[t];if(c(n.node)&&n.node.active)return void(n.closeByTouchBg&&!n.isPupuAni&&n.dismiss())}},p.onBack=function(){var e=!1;if(!c(this)||!this.node.active)return e;for(var t=this.m_popups.length-1;t>=0;t--){do{var n=this.m_popups[t];if(!c(n.node))break;if(!n.node.active)break;!n.closeByTouchBack||n.isPupuAni?e=!0:(e=!0,n.dismiss())}while(0);if(e)break}return e},p.onHideEnd=function(e){for(var n=0;n<this.m_popups.length;n++)if(this.m_popups[n]===e){this.m_popups.splice(n,1),e.onPreDestroy(),e.node.destroy();break}if(0==this.m_popups.length)this.maskBg.setSiblingIndex(0);else{var i=this.m_popups[this.m_popups.length-1].node.getSiblingIndex()-1;i<0&&(i=0),this.maskBg.setSiblingIndex(i),this.m_popups[this.m_popups.length-1].node.setSiblingIndex(i+1)}0==this.m_popups.length&&(f.isPaused()?this.maskBg.opacity=0:this.maskBg.fadeOut(e.style==k.POPUP?.2:.1),this.maskBg.off(g.EventType.TOUCH_START,this.onBgTouch,this),this.node.emit(t.EVT_POPO_CLOSE_LAST),this._isMaskOn=!1)},p.getVisibleCount=function(){for(var e,t=0,n=s(this.m_popups);!(e=n()).done;){var i=e.value.node;c(i)&&i.active&&++t}return t},p.closeWindowByTag=function(e,t){void 0===t&&(t=!0);for(var n,i=s(this.m_popups);!(n=i()).done;){var o=n.value;if(c(o.node)&&o.tag==e){o.dismiss(t);break}}},p.getWindowByTag=function(e){for(var t,n=s(this.m_popups);!(t=n()).done;){var i=t.value;if(c(i.node)&&i.tag==e)return i}return null},p.removeAllPopup=function(){for(;this.m_popups.length>0;){this.m_popups[0].dismiss(!0)}},t}(m)).EVT_POPO_OPEN_FRIST="EVT_POPO_OPEN_FRIST",S.EVT_POPO_CLOSE_LAST="EVT_POPO_CLOSE_LAST",O=t((w=S).prototype,"m_popups",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w));b.create=function(e,t){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];return(n=I.getInstance()).showWindow.apply(n,[e,t].concat(o))},p._RF.pop()}}}));

System.register("chunks:///_virtual/dlg_setting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base_dialog.ts"],(function(e){var t,n,i,o,c,r,l,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){c=e.cclegacy,r=e._decorator,l=e.Toggle},function(e){a=e.BaseDialog}],execute:function(){var u,s,f,g,p,h;c._RF.push({},"9e6beicjU1PfpWhmAR9mo48","dlg_setting",void 0);var _=r.ccclass,d=r.property;e("DlgSetting",(u=d(l),s=d(l),_((p=t((g=function(e){function t(){for(var t,n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return t=e.call.apply(e,[this].concat(c))||this,i(t,"check_effect",p,o(t)),i(t,"check_shock",h,o(t)),t}n(t,e),t.show=function(){t.create("prefabs/dialog_setting")};var c=t.prototype;return c.initView=function(){},c.exitView=function(e){},c.onToggle_effect=function(){},c.onToggle_shock=function(){},c.onBtn_like=function(){},c.onBtn_hideAd=function(){},t}(a)).prototype,"check_effect",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(g.prototype,"check_shock",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));c._RF.pop()}}}));

System.register("chunks:///_virtual/dlg_youWIn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base_dialog.ts"],(function(t){var n,o,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator},function(t){i=t.BaseDialog}],execute:function(){var c;o._RF.push({},"ec6ec4xY1dE9K91X+gYHMWc","dlg_youWIn",void 0);var r=e.ccclass;e.property,t("DlgYouWin",r(c=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).onNext=null,n}n(o,t);var e=o.prototype;return e.initView=function(t){this.onNext=t},e.exitView=function(){},e.onBtn_Next=function(){this.dismiss(!0),this.onNext&&this.onNext()},o.show=function(t){o.create("prefabs/dialog_youWIn",t)},o}(i))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/function.ts",["cc"],(function(e){var r,t,i,n,a,o,u,c;return{setters:[function(e){r=e.cclegacy,t=e.color,i=e.size,n=e.Texture2D,a=e.ImageAsset,o=e.rect,u=e.view,c=e.SpriteFrame}],execute:function(){function l(e,r){void 0===e&&(e=t(255,255,255,255)),void 0===r&&(r=i(6,6));var o=r.width,u=r.height,c=new n,l=new ArrayBuffer(o*u*4),s=new Uint8Array(l);s.fill(0);for(var v=0;v<o;v++)for(var f=0;f<u;f++){var g=4*(v*u+f);s[g]=e.r,s[g+1]=e.g,s[g+2]=e.b,s[g+3]=e.a}var h=new a;return h.reset({_data:s,width:o,height:u,format:n.PixelFormat.RGBA8888,_compressed:!1}),c.image=h,c}e({createColorSpriteFrame:function(e){void 0===e&&(e=null);null==s&&(s=l());e=e||o(0,0,u.getVisibleSize().width,u.getVisibleSize().height);var r=new c;return r.texture=s,r.rect=e,r},createTexture:l}),r._RF.push({},"11d66/HVYlE8oegwqpjVUXl","function",void 0);var s=null;r._RF.pop()}}}));

System.register("chunks:///_virtual/global_node.ts",["cc"],(function(e){var o,n,r,t,a,i,l,d,g,s,u,c;return{setters:[function(e){o=e.cclegacy,n=e.v3,r=e.Node,t=e.Layers,a=e.Canvas,i=e.Widget,l=e.Camera,d=e.Color,g=e.renderer,s=e.director,u=e.view,c=e.UITransform}],execute:function(){var m;e("getGlobalNode",(function(e,o){void 0===o&&(o=n(0,0));if(null==C){(C=new r("_globalNode")).setSiblingIndex(100),C.layer=t.Enum.UI_2D;var m=C.addComponent(a);m.alignCanvasWithScreen=!0;var p=C.addComponent(i);p.isAlignLeft=!0,p.isAlignRight=!0,p.isAlignTop=!0,p.isAlignBottom=!0,p.left=0,p.right=0,p.top=0,p.bottom=0;var b=new r("cameraNode");b.parent=C;var h=b.addComponent(l);h.visibility=t.Enum.UI_2D|t.Enum.UI_3D|t.Enum.DEFAULT,h.clearFlags=l.ClearFlag.SOLID_COLOR,h.clearColor=d.BLACK,h.far=2e3,h.projection=g.scene.CameraProjection.ORTHO,h.near=0,h.priority=1073741825,m.cameraComponent=h,s.addPersistRootNode(C)}var S=u.getVisibleSize();C.getComponent(c).setContentSize(S),C.setPosition(S.width/2,S.height/2);var f=C.getChildByName(e);f||((f=new r(e)).setSiblingIndex(v[e]||0),C.addChild(f));return f.position=n(o),f})),o._RF.push({},"05fd4P2I8JHdZ9a/VQfEFlu","global_node",void 0);var p=e("GlobalNodeNames",function(e){return e.PopuMgr="PopuMgr",e.SoundMgr="SoundMgr",e.GlobalScheduler="GlobalScheduler",e}({})),v=((m={})[p.PopuMgr]=1,m[p.SoundMgr]=2,m[p.GlobalScheduler]=3,m),C=null;o._RF.pop()}}}));

System.register("chunks:///_virtual/launch_scene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./const.ts"],(function(e){var i,t,a,s,l,n,c,o,r,p;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy,a=e._decorator,s=e.director,l=e.screen,n=e.view,c=e.log,o=e.sys,r=e.Component},function(e){p=e.SceneNames}],execute:function(){var g;t._RF.push({},"0b37ccP2tpLuZkZ4PYRu2Tg","launch_scene",void 0);var d=a.ccclass;a.property,e("default",d(g=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var a=t.prototype;return a.onLoad=function(){!function(){var e=l.windowSize,i=l.windowSize,t=n.getScaleX(),a=n.getScaleY(),s=n.getDesignResolutionSize(),r=n.getVisibleSize(),p=l.devicePixelRatio;c("--------view",JSON.stringify({getFrameSize:e,getCanvasSize:i,getScaleX:t,getScaleY:a,getDesignResolutionSize:s,getVisibleSize:r,getDevicePixelRatio:p},null,"  ")),display.width=r.width,display.height=r.height,display.cx=.5*display.width,display.cy=.5*display.height,display.gapHeight=r.height-s.height;var g=o.languageCode.toLowerCase(),d=(g=g.replace("-","_")).split("_")[0],u=g.substring(d.length);"_"==u.substr(0,1)&&(u=u.substring(1));display.sys_lang=d,"zh"==d&&(u=(u=(u=(u=(u=(u=u.replace("hans","")).replace("hant","")).replace("#","")).replace("_","")).replace("-","")).replace("=",""));display.sys_region=u,display.sys_langCode=d+"_"+u;var y=n.getVisibleSize();display.aspectRatio=y.height/y.width,display.isLongScreen=display.aspectRatio>=2,c("================display start=============");for(var h=0,S=Object.keys(display);h<S.length;h++){var v=S[h];c("------------display."+v+" = "+display[v])}c("================display end=============")}()},a.start=function(){s.preloadScene(p.play,null,(function(){s.loadScene(p.play)}))},t}(r))||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/layer_color.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,o,s,n,e,r,a,l,c,u,p;return{setters:[function(t){i=t.inheritsLoose,o=t.createClass},function(t){s=t.cclegacy,n=t._decorator,e=t.tween,r=t.Color,a=t.Layers,l=t.UITransform,c=t.Sprite,u=t.UIOpacity,p=t.Node}],execute:function(){var h;s._RF.push({},"8fa3eX1qzFHhJjsNvSAxFwl","layer_color",void 0);var _=n.ccclass;n.property,t("LayerColor",_("layer_color")(h=function(t){function s(i){var o;return void 0===i&&(i=r.WHITE),(o=t.call(this,"layer_color")||this).sprite=null,o.uiOp=null,o.trans=null,o._tw=null,o.layer=a.Enum.UI_2D,o.trans=o.addComponent(l),o.sprite=o.addComponent(c),o.sprite.color=i,o.uiOp=o.addComponent(u),o}i(s,t);var n=s.prototype;return n.fadeTo=function(t,i,o,s){void 0===o&&(o=null),void 0===s&&(s=null),o&&(this.opacity=o),this._tw&&this._tw.stop(),this._tw=e(this.uiOp).to(t,{opacity:i}),s&&(this._tw=this._tw.call(s)),this._tw.start()},n.fadeIn=function(t,i){void 0===i&&(i=null),this._tw&&this._tw.stop(),this._tw=e(this.uiOp).to(t,{opacity:255}),i&&(this._tw=this._tw.call(i)),this._tw.start()},n.fadeOut=function(t,i){void 0===i&&(i=null),this._tw&&this._tw.stop(),this._tw=e(this.uiOp).to(t,{opacity:0}),i&&(this._tw=this._tw.call(i)),this._tw.start()},o(s,[{key:"opacity",get:function(){return this.uiOp.opacity},set:function(t){this.uiOp.opacity=t}},{key:"size",get:function(){return this.trans.contentSize},set:function(t){this.trans.contentSize=t}}]),s}(p))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./const.ts","./base_dialog.ts","./dialog_mgr.ts","./dlg_setting.ts","./dlg_youWIn.ts","./global_node.ts","./launch_scene.ts","./play_scene.ts","./audio_util.ts","./click_button_effect.ts","./function.ts","./layer_color.ts","./cup.ts","./cupMgr.ts","./water.ts","./waterFlow.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/play_scene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dlg_setting.ts","./dlg_youWIn.ts","./audio_util.ts","./cupMgr.ts"],(function(t){var n,e,i,o,r,u,c,s,l,a,g,p,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,c=t.Label,s=t.Component},function(t){l=t.DlgSetting},function(t){a=t.DlgYouWin},function(t){g=t.AudioUtil,p=t.AudioEnum},function(t){h=t.CupMgr}],execute:function(){var f,_,v,d,M,m,y,x;r._RF.push({},"d95beogY9JNb4LoLIpuxWwf","play_scene",void 0);var b=u.ccclass,L=u.property;t("default",(f=L(h),_=L(c),v=L(c),b((m=n((M=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return n=t.call.apply(t,[this].concat(r))||this,i(n,"cupMgr",m,o(n)),i(n,"text_level",y,o(n)),i(n,"text_actionNum",x,o(n)),n}e(n,t);var r=n.prototype;return r.onLoad=function(){this.cupMgr.node.on("level_finish",this.onFinishOneLevel,this),this.cupMgr.node.on("do_pour",this.onPourAction,this)},r.onDestroy=function(){this.cupMgr.node.off("level_finish",this.onFinishOneLevel,this),this.cupMgr.node.off("do_pour",this.onPourAction,this)},r.start=function(){this.text_level.string="level_"+this.cupMgr.getLevel(),this.text_actionNum.string=this.cupMgr.getActionNum()+""},r.onFinishOneLevel=function(){var t=this;g.playEffect(p.youWin),a.show((function(){t.cupMgr.nextLevel(),t.text_level.string="level_"+t.cupMgr.getLevel(),t.text_actionNum.string=t.cupMgr.getActionNum()+""}))},r.onPourAction=function(){this.text_actionNum.string=this.cupMgr.getActionNum()+""},r.onBtn_restart=function(){this.cupMgr.nextLevel(),this.text_actionNum.string=this.cupMgr.getActionNum()+""},r.onBtn_recover=function(){this.cupMgr.undoAction(),this.text_actionNum.string=this.cupMgr.getActionNum()+""},r.onBtn_tip=function(){},r.onBtn_setting=function(){l.show()},n}(s)).prototype,"cupMgr",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(M.prototype,"text_level",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(M.prototype,"text_actionNum",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=M))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/water.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(t){var i,e,n,o,s,h,r,a,l,u,c,f,g,d,p,m,I,x;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){h=t.cclegacy,r=t._decorator,a=t.Sprite,l=t.EffectAsset,u=t.UITransform,c=t.v2,f=t.Node,g=t.Label,d=t.Color,p=t.v3,m=t.Material,I=t.Component},function(t){x=t.DEV}],execute:function(){var y,v,_,w,C,A,M,P;h._RF.push({},"1d866q6GeROiKW3fl629ZGB","water",void 0);var S=r.ccclass,b=r.property,k=r.requireComponent,F=r.executeInEditMode,O=r.disallowMultiple,H=r.executionOrder,z=function(t){return t[t.none=0]="none",t[t.in=1]="in",t[t.out=2]="out",t}(z||{});t("default",(y=k(a),v=H(-100),_=b(l),w=b({tooltip:x}),S(C=y(C=F(C=O(C=v((M=i((A=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),h=0;h<e;h++)s[h]=arguments[h];return(i=t.call.apply(t,[this].concat(s))||this)._action=z.none,i.infos=[],i.stopIdx=-1,i.curIdx=0,i._ratio=1,n(i,"effect",M,o(i)),n(i,"_skewAngle",P,o(i)),i._material=null,i.addHeight=0,i.onOutStart=null,i.onOutFinish=null,i.onInFInish=null,i.dot=null,i}e(i,t);var h=i.prototype;return h.onLoad=function(){this._ratio=this.node.getComponent(u).height/this.node.getComponent(u).width},h.initInfos=function(t){this.infos=t,this.curIdx=this.infos.length-1,this.initSizeColor(),this.updateAngleHeight()},h.addInfo=function(t){this.addHeight=t.height,t.height=0,this.infos.push(t),this._action=z.in,this.curIdx=this.infos.length-1,this.initSizeColor()},h.setPourOutCallback=function(t,i){this.onOutStart=t,this.onOutFinish=i},h.setPourInCallback=function(t){this.onInFInish=t},h.getPourStartAngle=function(){for(var t=0,i=0;i<=this.curIdx;i++)t+=this.infos[i].height;return this.getCriticalAngleWithHeight(t)},h.getPourEndAngle=function(){this.stopIdx=this.curIdx-this.getTopSameColorNum();for(var t=0,i=0;i<=this.stopIdx;i++)t+=this.infos[i].height;return this.getCriticalAngleWithHeight(t)},h.getCriticalAngleWithHeight=function(t){var i=0;if(0==t)return i=90;if(t<.5){var e=this._ratio/(2*t);i=Math.atan(e)}else{var n=2*this._ratio*(1-t);i=Math.atan(n)}return i=i/Math.PI*180},h.getTopSameColorNum=function(){for(var t=0,i=null,e=this.curIdx;e>=0;e--)if(null==i)t++,i=this.infos[e].colorId;else{if(this.infos[e].colorId!=i)break;t++}return t},h.onStartPour=function(){this._action=z.out,this.stopIdx=this.curIdx-this.getTopSameColorNum()},h.update=function(){this._action==z.out?this.pourStep():this._action==z.in&&this.addStep()},h.addStep=function(){if(!(this.curIdx<0)){var t=this.infos[this.curIdx];t.height=Math.round(1e3*(t.height+.005))/1e3,t.height>=this.addHeight&&(t.height=this.addHeight,this._action=z.none,this.onInFInish&&(this.onInFInish(),this.onInFInish=null)),this.updateAngleHeight()}},h.pourStep=function(){if(this.curIdx<0)this._action=z.none;else{for(var t=0,i=0;i<=this.curIdx;i++)t+=this.infos[i].height;var e=!1,n=this.skewAngle%360*Math.PI/180,o=Math.abs(Math.tan(n));e=t<.5?o>this._ratio/(2*t):o>2*this._ratio*(1-t);var s=this.infos[this.curIdx];(e||s.height<.05)&&(this.onOutStart&&(this.onOutStart(),this.onOutStart=null),s.height=Math.round(1e3*(s.height-.005))/1e3,s.height<.01&&(s.height=0,this.infos.pop(),this.curIdx--,this.curIdx==this.stopIdx&&(this.onOutFinish&&(this.onOutFinish(),this.onOutFinish=null),this._action=z.none)),this.updateAngleHeight())}},h.initSizeColor=function(){for(var t=0;t<this.infos.length;t++){var i=this.infos[t].color;this.material.setProperty("color"+t,i)}var e=c(this.node.getComponent(u).width,this.node.getComponent(u).height);this.material.setProperty("sizeRatio",e.y/e.x),this.material.setProperty("waveType",0),this.material.setProperty("layerNum",this.infos.length)},h.updateAngleHeight=function(){for(var t=0;t<6;t++)if(t<this.infos.length){var i=this.infos[t].height;this.material.setProperty("height"+t,i)}else this.material.setProperty("height"+t,0);var e=D(this._skewAngle);this.material.setProperty("skewAngle",1*e);var n=0;this._action==z.in?n=1:this._action==z.out&&(n=2),this.material.setProperty("waveType",n),this.material.setProperty("layerNum",this.infos.length),this.showDebugCenter()},h.showDebugCenter=function(){if(null==this.dot){this.dot=new f,this.dot.parent=this.node,this.dot.addComponent(u);var t=this.dot.addComponent(g);t.string="·",t.fontSize=60,t.color=d.RED}var i=this.node.getComponent(u).height/this.node.getComponent(u).width,e=D(this.skewAngle),n=0;if(!(this.curIdx>=this.infos.length)){for(var o=0;o<=this.curIdx;o++)n+=this.infos[o].height;var s=Math.sin(e)>=0,h=c(.5,1-n),r=Math.abs(Math.tan(e));if(n<=.5){if(r>2*i*n)h.x=Math.sqrt(2*n/r*i)/2,h.y=1-Math.sqrt(2*n*r/i)/2,r>i/(2*n)&&(h.y=.5,h.x=n);s||(h.x=1-h.x),Math.abs(h.x-.25)}else{if(r>2*i*(1-n))h.x=Math.sqrt(2*i*(1-n)/r)/2,h.y=Math.sqrt(2*i*(1-n)*r)/2/i,r>i/(2*(1-n))&&(h.y=.5,h.x=1-n);s&&(h.x=1-h.x)}h.x=h.x-.5,h.y=.5-h.y;var a=p(h.x*this.node.getComponent(u).width,h.y*this.node.getComponent(u).height);this.dot.position=a}},s(i,[{key:"skewAngle",get:function(){return this._skewAngle},set:function(t){t=Math.round(100*t)/100,this._skewAngle=t,this.updateAngleHeight()}},{key:"material",get:function(){if(null==this._material){var t=this.node.getComponent(a);t&&(t.spriteFrame&&(t.spriteFrame.packable=!1),this.effect&&(this._material=new m,this._material.initialize({effectAsset:this.effect}),t.setMaterial(this._material,0)),this._material=t.getSharedMaterial(0),this._material.setProperty("mainTexture",t.spriteFrame.texture))}return this._material}}]),i}(I)).prototype,"effect",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(A.prototype,"_skewAngle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i(A.prototype,"skewAngle",[w],Object.getOwnPropertyDescriptor(A.prototype,"skewAngle"),A.prototype),C=A))||C)||C)||C)||C)||C));function D(t){for(;t>360;)t-=360;for(;t<-360;)t+=360;return t%360*Math.PI/180}h._RF.pop()}}}));

System.register("chunks:///_virtual/waterFlow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,e,n,s,r,c;return{setters:[function(t){o=t.inheritsLoose,i=t.createClass},function(t){e=t.cclegacy,n=t.Graphics,s=t.Vec3,r=t.tween,c=t.v3}],execute:function(){e._RF.push({},"d1fd9hzUXNLu53dppXYhElO","waterFlow",void 0);t("WaterFlow",function(t){function e(){for(var o,i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return(o=t.call.apply(t,[this].concat(e))||this)._toPt=c(),o.from=c(),o}o(e,t);var h=e.prototype;return h.onLoad=function(){t.prototype.onLoad.call(this),this.lineWidth=6,this.lineCap=n.LineCap.ROUND},h.playFlowAni=function(t,o,i,e,n){this.clear();e?s.copy(this.from,o):s.copy(this.from,t),this.moveTo(this.from.x,this.from.y);r(this).set({toPt:t}).to(i,{toPt:o}).call(n).start()},h.setLineScale=function(t){this.lineWidth=6*t},i(e,[{key:"toPt",get:function(){return this._toPt},set:function(t){s.copy(this._toPt,t),this.clear(),this.moveTo(this.from.x,this.from.y),this.lineTo(this._toPt.x,this._toPt.y),this.stroke()}}]),e}(n));e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});